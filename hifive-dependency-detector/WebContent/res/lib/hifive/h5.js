/* Copyright (C) 2012-2014 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version Nightly_2014-07-30_13-23-17-120 gitCommitId fd231c21c0206ad5ff00a81c403ef808ab04fa91 (util,controller,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage) */
(function(a){function c(a,c,q){var t=null,w=ka[a],g=rb[a];g&&(t=g(a,w,c,q));!t&&w&&(t=h.u.str.format.apply(null,[w].concat(c)));t&&(t+="(code="+a+")");c=t?Error(t):Error("FwError: code = "+a);a&&(c.code=a);q&&(c.detail=q);throw c;}function X(a,c,q){var t=null,w=ka[a];w&&(c=[w].concat(c),t=h.u.str.format.apply(null,c));return{code:a,message:t,detail:q}}function N(a){return null==a?a:F(a)?a:[a]}function x(a){return"string"===typeof a}function Ba(a){return a.isRejected?a.isRejected():"rejected"===a.state()}
function Ca(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function ga(a){return!x(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function ia(l){if("regexp"===a.type(l))return l;var c="",c=-1!==l.indexOf("*")?a.map(l.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):l;return RegExp("^"+c+"$")}function ua(a,c,h){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(c,h):a[c](h))}function Y(c,h,q,t){return c[a.hasOwnProperty("curCSS")?"pipe":"then"](h,q,t)}function ib(a){return a&&a.document&&
a.document.nodeType===Na&&W(a.document)===a}function O(a){return typeof a.nodeType===ha?ib(a)?a.document:null:a.nodeType===Na?a:a.ownerDocument}function W(a){return window.document===a?window:a.defaultView||a.parentWindow}function $(a,c,q,t){function w(){var a=h.u.obj.argsToArray(arguments);G.push(2>a.length?a[0]:a);!A&&++z===u&&c&&c(G)}function g(){A=!0;q?q.apply(this,arguments):t&&h.settings.commonFailHandler&&h.settings.commonFailHandler.call(this,arguments)}var e=a?a.length:0,s=h.async.isPromise;
if(1===e){e=a[0];if(s(e)){e.done(c);q?e.fail(q):t&&h.settings.commonFailHandler&&e.fail(h.settings.commonFailHandler);return}e=0}if(0===e)c();else{for(var p=[],j=0,d=a.length;j<d;j++)e=a[j],s(e)&&p.push(e);var u=p.length;if(0===u)c&&c();else for(var G=[],z=0,A=!1,j=0;j<u;j++)p[j].done(w).fail(g)}}var Da=void 0;if(window.h5){if(window.h5.env&&"Nightly_2014-07-30_13-23-17-120"===window.h5.env.version)return;Da=window.h5}var h={};window.h5=h;h.coexist=function(){window.h5=Da;return h};h.env={version:"Nightly_2014-07-30_13-23-17-120"};
var ka={},rb={},jb=12029,ha="undefined",aa=1,Na=9,P=function(){var a=null;return function(c){a||(a=document.createElement("a"));a.setAttribute("href",c);return a.href}}(),F=Array.isArray||function(){var a=Object.prototype.toString;return function(c){return"[object Array]"===a.call(c)}}(),L=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(c){return"[object Function]"===a.call(c)}}return function(a){return"function"===typeof a}}(),kb={controllerInternal:null},
lb;(function(){function l(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case p:return"u";case "undefElem":return"_";case "objElem":return"@"}}function y(a,b){if(x(a)){var d=a;b&&(d=d.replace(/\\n/g,"\n").replace(/\\r/g,
"\r"));return d=d.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(y(a.toString())):a}function q(a,b){return"1"===b?a:x(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(q(a.toString())):a}function t(a,b,d){var i=h.async.deferred();h.ajax({url:a,async:b,
cache:d,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=s(arguments);a.push(this.url);i.notifyWith(i,a);i.resolveWith(i,a)}).fail(function(){i.rejectWith(i,s(arguments))});return i.promise()}function w(a){x(a)||c(j,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,d=0;d<b;d++)ga(a[d])||c(j,"h5.u.obj.ns()");for(var i=window,d=0;d<b;d++){var f=a[d];typeof i[f]===p&&(i[f]={});i=i[f]}return i}function g(a,b){var f=w(a),i;for(i in b)b.hasOwnProperty(i)&&(void 0!==
f[i]&&c(d,[a,i]),f[i]=b[i])}function e(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function s(a){return Array.prototype.slice.call(a)}var p="undefined",j=11E3,d=11001,u=11004,G=11005,z=11006,A={},f={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},b=void 0!==document.createElement("script").onload,m=-1===/\r\n/.toString().indexOf("\r\n");g("h5.u",{loadScript:function(d,f){var j=h.async.deferred,i=N(d);(!i||0===i.length)&&c(11007);for(var g=0,m=i.length;g<m;g++)d=i[g],(!x(d)||!a.trim(d))&&
c(11007);null!=f&&!a.isPlainObject(f)&&c(11008,"h5.u.loadScript()");var I=f&&!1===f.async?!1:!0,e=!!(f&&!0===f.force),g=!!(f&&!0===f.parallel),u=!!(f&&!0===f.atomic),l=!e,p=I?j():null,q=I?function(a){p.reject(X(11010,[a]))}:null,m=I?function(){var a=j();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,w=g?[]:null,G=[],z={};if(I){if(!u&&b){var y=a("head"),ba=function(a){var i=j(),b=document.createElement("script");b.onload=function(){b.onload=null;A[a]=a;i.resolve()};b.onerror=function(){b.onerror=
null;i.reject(a)};b.type="text/javascript";b.src=l?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;y[0].appendChild(b);return i.promise()};if(g)w.push(m()),a.each(i,function(){var a=P(this);if(!e&&a in A)return!0;w.push(ba(a))}),$(w,function(){p.resolve()},q);else{var R=Y(j().resolve(),m);a.each(i,function(){var a=P(this);R=Y(R,function(){if(e||!(a in A))return ba(a)},q)});Y(R,function(){p.resolve()},q)}}else if(g){var r=[];w.push(m());r.push(null);a.each(i,function(){var a=P(this);if(!e&&(a in A||a in
z))return!0;w.push(t(a,I,l));u?z[a]=a:r.push(null)});g=i=null;u?(i=function(){a.each(s(arguments),function(i,b){a.globalEval(b[0])});a.extend(A,z);p.resolve()},g=a.noop):(i=function(){p.resolve()},g=function(){for(var i=s(arguments),b=0;b<r.length;b++)if(i[b]){var d=i[b][3];r[b]!==d&&(a.globalEval(i[b][0]),r.splice(b,1,d))}});h.async.when(w).done(i).fail(q).progress(g)}else R=Y(j().resolve(),m),a.each(i,function(){var i=P(this);R=Y(R,function(){var b=j();!e&&(i in A||i in z)?b.resolve():t(i,I,l).done(function(d){u?
(G.push(d),z[i]=i):(a.globalEval(d),A[i]=i);b.resolve()}).fail(function(){b.reject(this.url)});return b.promise()},q)}),Y(R,function(){u&&(a.each(G,function(i,b){a.globalEval(b)}),a.extend(A,z));p.resolve()},q);return p.promise()}a.each(i,function(){var i=P(this);if(!e&&(i in A||i in z))return!0;t(i,I,l).done(function(b){u?(G.push(b),z[i]=i):(a.globalEval(b),A[i]=i)}).fail(function(){c(11010,[i])})});u&&(a.each(G,function(i,b){a.globalEval(b)}),a.extend(A,z))},createInterceptor:function(a,b){return function(d){var i=
{},f=a?a.call(this,d,i):d.proceed();d.result=f;if(!b)return f;if(f&&L(f.promise)&&!e(f)){var c=this;ua(f,"always",function(){b.call(c,d,i)});return f}b.call(this,d,i);return f}}});g("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var d=a.length-b.length;return 0<=d&&a.lastIndexOf(b)===d},format:function(a,b){if(null==a)return"";var d=arguments;return a.replace(/\{(\d+)\}/g,function(a,b){var f=d[parseInt(b,10)+1];return typeof f===p?p:f})},escapeHtml:function(b){return"string"!==
a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return f[a]})}});g("h5.u.obj",{expose:g,ns:w,serialize:function(b){function d(a){for(var b=0,i=g.length;b<i;b++)if(a===g[b])return!0;return!1}function f(a){for(var b=0,i=g.length;b<i;b++)a===g[b]&&g.splice(b,1)}function i(b){var j=b,e=a.type(b);"object"===typeof b&&(b instanceof String?e="String":b instanceof Number?e="Number":b instanceof Boolean&&(e="Boolean"));switch(e){case "String":case "string":j=l(e)+y(j);break;case "Boolean":j=j.valueOf();case "boolean":j=
l(e)+(j?1:0);break;case "Number":j=j.valueOf();if(a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b))j=Infinity===b.valueOf()?l("infinity"):-Infinity===b.valueOf()?l("-infinity"):l("nan");j=l(e)+j;break;case "number":j=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?l("infinity"):-Infinity===b?l("-infinity"):l("nan"):l(e)+j;break;case "regexp":j=l(e)+y(j.toString(),m);break;case "date":j=l(e)+ +j;break;case "array":d(b)&&c(ERR_CODE_REFERENCE_CYCLE);g.push(b);for(var u=[],j=l(e)+"[",
e=0,h=b.length;e<h;e++){u[e.toString()]=!0;var t;t=b.hasOwnProperty(e)?"function"===a.type(b[e])?l(p):i(b[e]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):l("undefElem");j+='"'+t+'"';e!==b.length-1&&(j+=",")}var e="",n;for(n in b)u[n]||"function"!==a.type(b[n])&&(e+='"'+y(n)+'":"'+i(b[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');e&&(j+=(b.length?",":"")+'"'+l("objElem")+"{"+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),j=j.replace(/,$/,""),j+='}"');j+="]";f(b);break;case "object":d(b)&&c(G);g.push(b);
j=l(e)+"{";for(n in b)b.hasOwnProperty(n)&&"function"!==a.type(b[n])&&(j+='"'+n+'":"'+i(b[n]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');j=j.replace(/,$/,"");j+="}";f(b);break;case "null":case p:j=l(e)}return j}L(b)&&c(11002);var g=[];return"2|"+i(b)},deserialize:function(b){function d(b){function j(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";
case "x":return"nan";case "d":return"date";case "r":return"regexp";case "a":return"array";case "o":return"object";case "l":return"null";case "u":return p;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;i=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(j(b)){case "String":i=new String(q(i,f));break;case "string":break;case "Boolean":"0"===i||"1"===i?i=new Boolean("1"===i):c(z);break;case "boolean":"0"===i||"1"===i?i="1"===i:c(z);break;case "nan":""!==i&&c(z);
i=NaN;break;case "infinity":""!==i&&c(z);i=Infinity;break;case "-infinity":""!==i&&c(z);i=-Infinity;break;case "Number":"infinity"===j(i)?i=new Number(Infinity):"-infinity"===j(i)?i=new Number(-Infinity):"nan"===j(i)?i=new Number(NaN):(i=new Number(i),isNaN(i.valueOf())&&c(z));break;case "number":i=(new Number(i)).valueOf();isNaN(i)&&c(z);break;case "array":var e;try{e=a.parseJSON(i)}catch(g){c(z)}F(e)||c(z);for(var m=0;m<e.length;m++)switch(j(e[m].substring(0,1))){case "undefElem":delete e[m];break;
case "objElem":for(var h=d(l("object")+e[m].substring(1)),b=[],m=0,t=e.length-1;m<t;m++)b[m]=e[m];e=b;for(var n in h)e[n]=h[n];break;default:e[m]=d(e[m])}i=e;break;case "object":try{e=a.parseJSON(i)}catch(s){c(z)}a.isPlainObject(e)||c(z);for(n in e)e[n]=d(e[n]);i=e;break;case "date":i=new Date(parseInt(i,10));break;case "regexp":try{m=i.match(/^\/(.*)\/(.*)$/),h=q(m[1],f),i=RegExp(h,m[2])}catch(w){c(z)}break;case "null":""!==i&&c(z);i=null;break;case p:""!==i&&c(z);i=void 0;break;default:c(u)}return q(i,
f)}x(b)||c(11009);b.match(/^(.)\|(.*)/);var f=RegExp.$1;"1"!==f&&"2"!==f&&c(11003,[f,"2"]);var i=RegExp.$2;return d(i)},isJQueryObject:e,argsToArray:s,getByPath:function(a,b){x(a)||c(j,"h5.u.obj.getByPath()");var d=a.split("."),i=0;if("window"===d[0]&&(!b||b===window))i=1;for(var f=b||window,e=d.length;i<e&&!(f=f[d[i]],null==f);i++);return f}})})();(function(){function l(a,c){a.target||(a.target=c);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var g=!1;a.isDefaultPrevented=
function(){return g};a.preventDefault=function(){g=true}}if(!a.isImmediatePropagationStopped){var e=!1;a.isImmediatePropagationStopped=function(){return e};a.stopImmediatePropagation=function(){e=true}}}function y(a){var c={},g;for(g in a){var e=a[g];if(a.hasOwnProperty(g)&&(L(e)||null===e||"string"===typeof e||"number"===typeof e||"boolean"===typeof e))c[g]=e}this._mix=function(a){for(var e in c)a[e]=c[e]};this._hasInterface=function(a){for(var e in c)if(!h.u.str.startsWith(e,"_")&&typeof a[e]===
ha)return!1;return!0}}function q(a){return new y(a)}a.extend(y.prototype,{mix:function(a){return this._mix(a)},hasInterface:function(a){return this._hasInterface(a)}});h.u.obj.expose("h5.mixin",{createMixin:q,eventDispatcher:q({hasEventListener:function(a,c){if(!this._eventListeners)return!1;var g=this._eventListeners[a];if(!g||!this._eventListeners.hasOwnProperty(a))return!1;for(var e=0,h=g.length;e<h;e++)if(g[e]===c)return!0;return!1},addEventListener:function(a,h){(2>arguments.length||!x(a))&&
c(16E3);null==h||this.hasEventListener(a,h)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||(this._eventListeners[a]=[]),this._eventListeners[a].push(h))},removeEventListener:function(a,c){if(this.hasEventListener(a,c))for(var g=this._eventListeners[a],e=0,h=g.length;e<h;e++)if(g[e]===c){g.splice(e,1);break}},dispatchEvent:function(a){if(this._eventListeners){var c=this._eventListeners[a.type];if(c){c=c.slice(0);l(a,this);for(var g=0,e=c.length;g<e&&!a.isImmediatePropagationStopped();g++)L(c[g])?
c[g].call(a.target,a):c[g].handleEvent&&c[g].handleEvent(a);return a.isDefaultPrevented()}}}})})})();(function(){var l,y,q,t,w,g,e;function s(a){return a.match(/^error$/i)?l:a.match(/^warn$/i)?y:a.match(/^info$/i)?q:a.match(/^debug$/i)?t:a.match(/^trace$/i)?w:a.match(/^all$/i)?g:a.match(/^none$/i)?e:null}function p(a,b){var d={};if(F(a)){var f=a.slice(0,3).join(" <- ");0<a.slice(3).length&&(f+=" ...");d.recent=f;d.all=b.join("\n")}else d.recent=a,d.all=b;return d}function j(a){var b="";a.name?b=a.name:
(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function d(b){for(var b=h.u.obj.argsToArray(b),d=[],f=0,e=b.length;f<e;f++)d.push(a.type(b[f]));return d.join(", ")}function u(){}function G(i){(!x(i)||0===a.trim(i).length)&&c(b);this.category=a.trim(i)}var z=10002,A=10003,f=10004,b=10005,m=10007,n=10008,H=10010;l=50;y=40;q=30;t=20;w=10;g=0;e=-1;var C=null;u.prototype={init:function(){},log:function(a){window.console&&(x(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=
a.args,d=null,d=1===b.length?b[0]:h.u.str.format.apply(h.u.str,b),b=this._getLogPrefix(a)+d;a.logger.enableStackTrace&&(b+="  ["+a.stackTrace.recent+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var d=!1;a==l&&console.error?(console.error(b),d=!0):a==y&&console.warn?(console.warn(b),
d=!0):a==q&&console.info?(console.info(b),d=!0):a==t&&console.debug&&(console.debug(b),d=!0);!d&&console.log&&console.log(b)},_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,d=this._getLogPrefix(a);b.unshift(d);a.level==l&&console.error?this._output(console.error,b):a.level==y&&console.warn?this._output(console.warn,b):a.level==q&&console.info?this._output(console.info,
b):a.level==t&&console.debug?this._output(console.debug,b):this._output(console.log,b)},_output:function(a,b){try{if(a.apply){a.apply(console,b);return}}catch(d){}a(b)}};G.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(l,arguments,this.error)},warn:function(a){this._log(y,arguments,this.warn)},info:function(a){this._log(q,arguments,this.info)},debug:function(a){this._log(t,arguments,this.debug)},trace:function(a){this._log(w,arguments,this.trace)},_traceFunctionName:function(b){var f=
Error(),e=f.stack||f.stacktrace,f=[],c={};if(e)var f=e.replace(/\r\n/,"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),m=null,f=a.map(f,function(b){return m=0===b.length?null:""===a.trim(b)?"{anonymous}":a.trim(b)}),c=p(f.slice(3,f.length),f.slice(0,this.maxStackSize));else{e=null;try{e=b.caller}catch(g){}b=0;if(e)for(;;){var u=d(e.arguments),h=j(e),n=null;try{n=e.caller}catch(l){f.push("{unable to trace}");
c=p(f,f);break}h?f.push("{"+h+"}("+u+")"):n?f.push("{anonymous}("+u+")"):f.push("{root}("+u+")");if(!n||b>=this.maxStackSize){c=p(f,f);break}e=n;b++}else c=p("{unable to trace}","{unable to trace}")}return c},_log:function(a,b,d){var b={level:a,args:h.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(d):""},f=C.out,e=C.defaultOut,d=null;if(f)for(var f=N(f),j=0,c=f.length;j<c;j++){var m=f[j];if(m.compiledCategory.test(this.category)){d=m;break}}d||(d=e);j=d.compiledLevel;
d=d.compiledTargets;if(!(a<j||0>j))if(b.logger=this,b.date=new Date,b.levelString=this._levelToString(a),d&&0!==d.length){j=0;for(c=d.length;j<c;j++)d[j].log(b)}},_levelToString:function(a){if(a===l)return"ERROR";if(a===y)return"WARN";if(a===q)return"INFO";if(a===t)return"DEBUG";if(a===w)return"TRACE"}};h.u.obj.expose("h5.log",{createLogger:function(a){return new G(a)},configure:function(){function b(j,i,g){var u=null==g;if(!u){var h=i.category;(!x(h)||0===a.trim(h).length)&&c(H);h=a.trim(h);-1!==
a.inArray(h,e)&&c(z,i.category);i.compiledCategory=ia(h);e.push(h)}h=null==i.level?s(u?d.level:g.level):x(i.level)?s(a.trim(i.level)):i.level;"number"!==typeof h&&c(A,i.level);i.compiledLevel=h;var h=[],l=i.targets;if(!u||null!=l){var r=[];null==l||F(l)||x(l)&&a.trim(l).length||c(n);for(var l=N(l),B=0,D=l.length;B<D;B++){null==l[B]||x(l[B])&&a.trim(l[B]).length||c(n);var v=l[B];if(v){-1!==a.inArray(v,r)&&c(m,v);var p=j[v];p||c(f,v);r.push(v);h.push(p.compiledTarget)}}if(!u&&(j=g.targets,null!=j)){j=
N(j);B=0;for(D=j.length;B<D;B++)v=j[B],-1===a.inArray(v,r)&&(h.push(g.compiledTargets[B]),r.push(v))}}i.compiledTargets=h}var d={level:"NONE",targets:null},e=[],j=a.extend(!0,{},h.settings.log?h.settings.log:{defaultOut:d}),g=j.target;g||(g={},j.target=g);(function(b){a.isPlainObject(b)||c(10009);for(var d in b){var f=b[d];a.type(f.type)!=="object"&&f.type!=="console"&&c(1E4);var j=null,j=f.type==="console"?new u:a.extend(true,{},f.type);j.init&&j.init(f);f.compiledTarget=j}b.console={type:"console",
compiledTarget:new u}})(g);var l=j.defaultOut;l||(l=d,j.defaultOut=l);b(g,l);var p=j.out;if(p)for(var p=N(p),q=0,G=p.length;q<G;q++)b(g,p[q],l);C=j}})})();(function(){function c(l){h.settings.aspects=a.map(N(l),function(a){a.target&&(a.compiledTarget=ia(a.target));a.pointCut&&(a.compiledPointCut=ia(a.pointCut));return a})}h.u.obj.ns("h5.settings");h.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,
retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||a===jb))return!1}},trackstartTouchAction:"none",res:{currentPath:null}};var y=h.u.createInterceptor(function(a,c){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);c.start=new Date;return a.proceed()},function(a,c){var h=(new Date).getTime()-c.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,h)});h.u.obj.expose("h5.core.interceptor",{lapInterceptor:y,logInterceptor:y,errorInterceptor:function(a){var c=
null;try{c=a.proceed()}catch(l){h.settings.commonFailHandler&&L(h.settings.commonFailHandler)&&h.settings.commonFailHandler.call(null,l)}return c}});a(document).trigger("h5preinit");h.settings.aspects&&c(h.settings.aspects);h.log.configure()})();(function(){h.u.obj.expose("h5.env",{ua:function(c){function h(a,b){var d=x(a,"[^;)]*",b).split(" ");return 1===d.length?"":d[d.length-1]}function q(a,b){var d=x(a,"[^;) ]*",b).split("/");return 1===d.length?"":d[d.length-1]}function t(a,b){var d=x(a,"[^;) ]*",
b).split(":");return 1===d.length?"":d[d.length-1]}var w=!!c.match(/iPhone/i),g=!!c.match(/iPad/i),e=w||g,s=!!c.match(/android/i),p=!!c.match(/Windows Phone/i),j=!!c.match(/MSIE/)||!!c.match(/Trident/),d=!!c.match(/Firefox/i),u=!!c.match(/Chrome/i)||!!c.match(/CrMo/)||!!c.match(/CriOS/),G=!s&&!!c.match(/Safari/i)&&!u,z=!!c.match(/Webkit/i),A=!!c.match(/Opera/i),f=s&&!!c.match(/Safari/i)&&!u,b=!(!w&&!p&&!(f&&c.match(/Mobile/)&&!c.match(/SC-01C/)||s&&u&&c.match(/Mobile/)||c.match(/Fennec/i)||c.match(/Opera Mobi/i))),
m=!(!g&&!(f&&!c.match(/Mobile/)||s&&u&&!c.match(/Mobile/)||c.match(/SC-01C/)||c.match(/Fennec/i)||c.match(/Opera Tablet/i))),n=!b&&!m,H=null,C=null,i=function(b,d){return a.trim(c.substring(c.indexOf(b)+b.length,c.indexOf(d))).split("_")},x=function(b,d,f){return a.trim(c.match(!1===f?RegExp(b+d):RegExp(b+d,"i")))};if(w)C=i("iPhone OS","like"),H=parseInt(C[0]),C=C.join(".");else if(g)C=i("CPU OS","like"),H=parseInt(C[0]),C=C.join(".");else if(!s||!d)s?(C=h("Android"),H=parseInt(C.split(".")[0])):
p&&((C=h("Windows Phone OS"))||(C=h("Windows Phone")),H=parseInt(C.split(".")[0]));j&&A&&(j=!1);var S=i=null;if(e||s&&f)i=H,S=C;else{var I=null;j?I=h("MSIE",!1)||t("rv"):u?(I=q("Chrome",!1))||(I=q("CrMo",!1)):G?I=q("Version"):d?I=q("Firefox"):A&&((I=q("Version"))||(I=q("Opera")),I||(I=h("Opera")));I&&(i=parseInt(I.split(".")[0]),S=I)}return{osVersion:H,osVersionFull:C,browserVersion:i,browserVersionFull:S,isiPhone:w,isiPad:g,isiOS:e,isAndroid:s,isWindowsPhone:p,isIE:j,isFirefox:d,isChrome:u,isSafari:G,
isOpera:A,isAndroidDefaultBrowser:f,isSmartPhone:b,isTablet:m,isDesktop:n,isWebkit:z}}(navigator.userAgent)})})();(function(){function l(a){function c(){j=!0;g=this;h=e(arguments);if(Ba(a)||Ca(a))return a;var b=e(arguments);if(0<f.length)for(var m=0,u=f.length;m<u;m++){var l=b;l!==arguments&&(l=N(l));L(f[m])&&f[m].apply(this,l)}return a}var j=!1,g=null,h=null,f=[];a.progress=function(){for(var b=e(arguments),c=0,u=b.length;c<u;c++){var l=b[c];if(F(l))a.progress.apply(this,l);else if(L(l))if(j){var p=
h;p!==h&&(p=N(p));l.apply(g,p)}else f.push(l)}return this};a.notify=c;a.notifyWith=function(a,d){return!d?c.apply(a):c.apply(a,d)}}function y(a){if(!a)return!1;for(var a=N(a),c=0,j=a.length;c<j;c++)if(L(a[c]))return!0;return!1}function q(d,c){function p(a){c?c[a]&&(d[a]=c[a]):(m[a]=d[a],d[a]=function(){return function(){if(!f){var b=e(arguments);if("then"===a||"pipe"===a)b=b[1];y(b)&&(f=!0)}return d._h5UnwrappedCall.call(this,a,e(arguments))}}(a),n[a]=d[a])}function z(a){return function(){var c=h.settings.commonFailHandler;
!f&&c&&!b&&(d.fail.call(this,c),b=!0);return a.apply(this,arguments)}}if(d._h5UnwrappedCall)return d;var A=!!d.progress;!A&&!j(d)?l(d):c&&(d.progress=c.progress);var f=!1,b=!1,m={},n={};d._h5UnwrappedCall=c?c._h5UnwrappedCall:function(b,c){c=N(c);a.extend(d,m);var f=d[b].apply(this,c);a.extend(d,n);return f};for(var H=0,C=t.length;H<C;H++){var i=t[H];d[i]&&p(i)}d.pipe&&!c&&(d.pipe=function(){for(var a=h.async.deferred(),b=e(arguments),d=0,c=w.length;d<c;d++){var f=this;(function(b,d,c){function j(){if(e){var d=
b.apply(this,arguments);if(d&&L(d.promise)){q(d);d.done(a.resolve);d._h5UnwrappedCall("fail",a.reject);L(d.progress)&&d.progress(a.notify)}else a[c+"With"](this,[d])}else a[c+"With"](this,arguments)}var e=L(b);if(!e&&d==="fail")f._h5UnwrappedCall(d,j);else f[d](j)})(b[d],w[d],g[d])}return a.promise()},n.pipe=d.pipe);if(d.then&&!c){var x=d.then;d.then=s?d.pipe:function(){var a=arguments,b=x.apply(this,a);!A&&y(a[2])&&d.progress.call(d,a[2]);return b};n.then=d.then}d.reject&&(d.reject=c&&c.reject?c.reject:
z(d.reject));d.rejectWith&&(d.rejectWith=c&&c.rejectWith?c.rejectWith:z(d.rejectWith));if(d.promise)if(c&&c.promise)d.promise=c.promise;else{var S=d.promise;d.promise=function(){return q(S.apply(this,arguments),d)}}return d}var t=["fail","always","pipe","then"],w=["done","fail","progress"],g=["resolve","reject","notify"],e=h.u.obj.argsToArray,s=function(){var d=a.Deferred();return d!==d.then()}(),p=function(){var d=a.Deferred();return q(d)},j=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};
h.u.obj.expose("h5.async",{deferred:p,when:function(){var d=e(arguments);1===d.length&&F(d[0])&&(d=d[0]);var c=d.length,j=h.async.deferred(),g=j.promise(),l=a.when.apply(a,d).done(function(){j.resolveWith(this&&this.promise&&this.promise()===l?j:this,e(arguments))}).fail(function(){j.rejectWith(this,e(arguments))});if(l.progress)l.progress(function(){j.notifyWith(this===l?g:this,e(arguments))});else{for(var f=[],b=0;b<c;b++)f[b]=void 0;for(var m=function(a){return function(b){f[a]=1<arguments.length?
e(arguments):b;j.notifyWith(g,f)}},b=0;b<c;b++){var n=d[b];n&&L(n.promise)&&n.progress&&(1<c?n.progress(m(b)):n.progress(function(){j.notifyWith(g,e(arguments))}))}}return g},isPromise:j,loop:function(d,e,g){F(d)||c(5E3);var h=p(),l="number"===a.type(g)?g:20,f=0,b=d.length,m,n=null,s=function(){if(f===b)h.resolve(d);else{var a=e.call(d,f,d[f],n);f++;j(a)?a.done(function(){m()}).fail(function(){h.reject(d)}):m()}},q=function(){setTimeout(function(){var a=f-1;0<f&&h.notify({data:d,index:a,value:d[a]});
s()},0)},i=!1;m=function(){i||(0===f%l?q():s())};var t=!1,n={resume:function(){!t&&i&&(i=!1,m())},pause:function(){i=!0},stop:function(){t=!0;h.resolve(d)}};q();return h.promise()}})})();(function(){function c(a,d){this.id=a;this.content=d}function y(a,d,c){this.url=a;this.path=d;this.content=c}function q(a){this._resourceKey=a}function t(a){a=0===a.indexOf("./")?a.slice(2):a;return(h.settings.res.currentPath||"./")+a}function w(a,d){void 0===d&&L(a)&&(d=a,a=void 0);e.unshift({type:a,resolver:d})}
var g=h.async.deferred,e=[],s={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a){this.cacheUrls.length>=this.MAX_CACHE&&this.clearCache(this.cacheUrls[0]);var d=a.url;this.cache[d]=a;this.cacheUrls.push(d)},clearCache:function(a,d){var c=P(a);d||delete this.cache[c];for(var e=0,g=this.cacheUrls.length;e<g;e++)if(this.cacheUrls[e]===c){this.cacheUrls.splice(e,1);break}},clearAllCache:function(){this.cacheUrls=[];this.cache={}},getResourceFromCache:function(a){var d=this.cache[a];
this.clearCache(a,!0);this.cacheUrls.push(a);return d},loadResourceFromPath:function(a){var d=P(a);if(this.accessingUrls[d])return this.accessingUrls[d];var c=g(),e=c.promise();this.accessingUrls[d]=e;var l=this,d=P(a);h.ajax(a).done(function(e,f,b){delete l.accessingUrls[d];e=new y(d,a,b.responseText);l.append(e);c.resolve(e)}).fail(function(e){delete l.accessingUrls[d];c.reject(X(17E3,[e.status,d],{url:d,path:a,error:e}))});return e}};a.extend(q.prototype,{resolve:function(a){for(var c=this._resourceKey,
g=0,h=e.length;g<h;g++)if(!(a&&a!==e[g].type)){var l=e[g].resolver(c,a);if(!1!==l)return l}return!1},getKey:function(){return this._resourceKey}});var p={load:function(a){var c=P(a);return s.cache[c]?g().resolve(s.getResourceFromCache(c)).promise():s.loadResourceFromPath(a)},clearCache:function(a){s.clearCache(a)},clearAllCache:function(){s.clearAllCache()}};w("namespace",function(a){var c=h.u.obj.getByPath(a);if(c)return g().resolve(c).promise();var c=t(a.replace(/\./g,"/"))+".js",e=g();h.u.loadScript(c).done(function(){e.resolve(h.u.obj.getByPath(a))}).fail(function(a){e.reject(a)});
return e.promise()});w("ejsfile",function(e){if(!/\.ejs$/.test(e.slice(0,(e+"?").indexOf("?"))))return!1;var d=g();p.load(t(e)).done(function(e){var g=a(e.content).filter(function(){return 1===this.nodeType&&1!==this.tagName.indexOf("/")}),j=[];0<g.not('script[type="text/ejs"]').length?d.reject(X(7011,null,{url:e.url,path:e.path})):(0===g.length&&d.reject(X(7001,null,{url:e.url,path:e.path})),g.each(function(){var g=a.trim(this.id);g||d.reject(X(7002,null,{url:e.url,path:e.path}));var f=a.trim(this.innerHTML);
j.push(new c(g,f))}),d.resolve({url:e.url,path:e.path,templates:j}))}).fail(function(a){var c=a.detail,c=X(7003,[c.error.status,c.url],c);a.code=c.code;a.message=c.message;a.detail=a.detail;d.reject(a)});return d.promise()});w("jsfile",function(a){return!/\.js$/.test(a.slice(0,(a+"?").indexOf("?")))?!1:h.u.loadScript(t(a))});w("cssfile",function(a){if(!/\.css$/.test(a.slice(0,(a+"?").indexOf("?"))))return!1;var c=document.getElementsByTagName("head")[0],e=document.createElement("link");e.type="text/css";
e.rel="stylesheet";e.href=t(a);c.appendChild(e);return g().resolve(e).promise()});h.u.obj.expose("h5.res",{require:function(a){return new q(a)},addResolver:w,isDependency:function(a){return a instanceof q},urlLoader:p,resolvers:e})})();(function(){function c(a,h){for(var l=0,j=w.length;l<j;l++){var d=w[l];a[d]&&(h[g[d]](a[d]),a[d]=void 0)}}function y(c,g,h){for(var j in g)if(g.hasOwnProperty(j)&&(h||!L(g[j]))&&-1===a.inArray(j,t))c[j]=g[j]}function q(a,c){y(this,a,!0);c.promise(this);var g=this.always;
this.always=function(){g.apply(this,arguments);return this}}var t=["error","success","complete"],w=["error","success","complete"],g={success:"done",error:"fail",complete:"always"};h.u.obj.expose("h5",{ajax:function(){function e(a,c,e){y(u,e);d.resolveWith(this,arguments)}function g(c,j,h){if(0===p.retryCount||!1===p.retryFilter.apply(this,arguments))y(u,c),d.rejectWith(this,arguments);else if(p.retryCount--,this.async){var f=this;setTimeout(function(){a.ajax(f).done(e).fail(g)},p.retryInterval)}else a.ajax(this).done(e).fail(g)}
var p={},j=arguments;x(j[0])?(a.extend(p,j[1]),p.url=j[0]):a.extend(p,j[0]);var p=a.extend({},h.settings.ajax,p),d=h.async.deferred();c(p,d);var j=a.ajax(p),u=new q(j,d);j.done(e).fail(g);return u}})})();(function(){function l(a,b,k,d,e){for(var f in k)f in Da&&c(ab,[e,f],{controllerDefObj:k})}function y(b,k){function d(f,e){-1!==a.inArray(f,e)&&c(ub,[k],{controllerDefObj:b});j(f,function(a){d(a,e.concat([f]))},!0)}d(b,[])}function q(b){function k(f,e){-1!==a.inArray(f,e)&&c(vb,[b.__name],{logicDefObj:b});
d(f,function(a){k(a,e.concat(f))})}k(b,[])}function t(b,k,d){null==b&&c(qa,[d],{controllerDefObj:k});!x(b)&&"object"!==typeof b&&c(U,[d],{controllerDefObj:k});b=a(b);0===b.length&&c(Pa,[d],{controllerDefObj:k});1<b.length&&c(Qa,[d],{controllerDefObj:k});b[0].nodeType!==Na&&b[0].nodeType!==aa&&c(wb,[d],{controllerDefObj:k})}function w(a,b,k,c,d){this.controller=a;this.event=b;this.evArg=k;this.selector=c;this.selectorType=d}function g(a){return T(this)||!this.__controllerContext.executeListeners?void 0:
a.proceed()}function e(a,b,k){var c;c=a.__name;var d=[],f=h.settings.aspects;if(f&&0!==f.length)for(var f=N(f),e=f.length-1;-1<e;e--){var o=f[e];if(!o.target||o.compiledTarget.test(c)){var i=o.interceptors;if(!o.pointCut||o.compiledPointCut.test(b))if(F(i))for(o=i.length-1;-1<o;o--)d=d.concat(i[o]);else d.push(i)}}c=d;k&&c.push(g);return s(a[b],b,c)}function s(a,b,k){for(var c=function(a,b,va){return function(){var k=this;return va.call(k,{target:k,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(k,
this.args)}})}},d=0,f=k.length;d<f;d++)a=c(a,b,k[d]);return a}function p(a,b,k){if(k&&a===ia)return k.rootElement;for(var c=["window","document","navigator"],d=0,f=c.length;d<f;d++){var e=c[d];if(a===e||ob(a,e+"."))return h.u.obj.getByPath(a,W(b))}return k&&ob(a,"this.")?h.u.obj.getByPath(a.slice(5),k):a}function j(a,b,k){var c=k?na.get(a.__name):a.__controllerContext&&a.__controllerContext.cache;if(c)for(var k=0,d=c.childControllerProperties.length;k<d;k++){var f=c.childControllerProperties[k];if(a[f]&&
!1===b(a[f],a,f))return!1}else for(f in a){var c=a,d=f,e=k,o=c[d];if(Ra(d,Y)&&"rootController"!==d&&"parentController"!==d&&o&&(e||o.__controllerContext&&!o.__controllerContext.isRoot&&(!o.parentController||o.parentController===c))&&!1===b(a[f],a,f))return!1}}function d(a,b){var k=na.get(a.__name);if(k)for(var c=0,d=k.logicProperties.length;c<d;c++){var f=k.logicProperties[c];if(!1===b(a[f],a,f))return!1}else for(f in a)if(a.hasOwnProperty(f)&&Ra(f,bb)&&!1===b(a[f],a,f))return!1}function u(a,b,k,
c){function d(a,k,va){if(!1===u(a,b,k,va))return!1}return!1===b.call(this,a,k,c)?!1:j(a,d)}function G(a,b,k,c){if(!1===j(a,function(a,k,c){if(!a||!1===G(a,b,k,c))return!1})||!1===b.call(this,a,k,c))return!1}function z(a,b){var k=[];j(a,function(a){(a=a[b])&&k.push(a)});return k}function A(b,k,c){function d(b){var k=b.handler,c=b.controller;b.originalHandler=k;b.handler=function(){var va=!b.isNativeBind&&1===h.settings.listenerElementType?a(this):this;k.call(c,Ea(b,arguments),va)}}var f=k.selector,
e=k.eventName;switch(e){case "mousewheel":c=la(b,f,e,c);break;case wa:case ga:case Fa:c=Oa(b,f,e,c);break;default:c=I(b,f,e,c)}F(c)||(c=[c]);f=0;for(e=c.length;f<e;f++){var o=c[f];d(o);o.isBindRequested=k.isBindRequested;o.isGlobal=k.isGlobal;o.bindTarget=k.bindTarget;o.controller=b}return c}function f(b,k){var c=b.controller,d=c.rootElement,f=b.selector,e=b.eventName,o=b.handler,g=b.isBindRequested,i=b.isGlobal;b.bindTarget?(b.evSelectorType=P.SELECTOR_TYPE_OBJECT,Ga(b)):i?(c=p(f,k,c),g||!x(c)?(b.evSelectorType=
P.SELECTOR_TYPE_OBJECT,b.bindTarget=x(c)?a(c):c,Ga(b)):(b.evSelectorType=P.SELECTOR_TYPE_GLOBAL,a(k).delegate(c,e,o)),b.evSelector=c):(b.evSelectorType=P.SELECTOR_TYPE_LOCAL,b.evSelector=f,g?(b.bindTarget=a(f,d),Ga(b)):a(d).delegate(f,e,o));b.isBindCanceled||(b.controller.__controllerContext.boundHandlers.push(b),ka&&e===wa&&null!=h.settings.trackstartTouchAction&&(i?a(b.evSelector,k):a(b.evSelector,d)).each(function(){this.style[cb]=h.settings.trackstartTouchAction}))}function b(b,k,c){var d=b.controller,
f=d.rootElement,e=b.selector,o=b.handler,g=b.eventName,i=b.isGlobal;if(b.bindTarget)k=b.bindTarget,f=b.eventName,e=b.handler,b.isNativeBind?k.removeEventListener(f,e):a(k).unbind(f,e);else if(i){if(null==W(k))return;a(k).undelegate(e,g,o)}else a(f).undelegate(e,g,o);c||(c=d.__controllerContext.boundHandlers,c.splice(a.inArray(b,c),1))}function m(a,b){u(a,function(a){a.__controllerContext.executeListeners=b})}function n(a,b,k){return function(){var c=null,d=a.__name;if(a[b])try{c=a[b]({args:a.__controllerContext.args})}catch(f){B(a,
f)}c&&L(c.done)&&L(c.fail)?c.done(k).fail(function(){var b=X(J,d,xa(arguments));B(a.rootController,null,b)}):k()}}function H(a,b){u(a,function(a){if(!T(a)&&!a.__controllerContext.isDisposing){var k,c;"__init"===b?(k=C(a),c=[a.preInitPromise],a.parentController&&c.push(a.parentController.initPromise)):"__postInit"===b?(k=i(a),c=z(a,"postInitPromise")):(k=ea(a),c=z(a,"readyPromise"));$(c,n(a,b,k))}})}function C(a){return function(){if(!ca(a)){a.isInit=!0;var b=a.__controllerContext.initDfd;delete a.__controllerContext.templatePromise;
delete a.__controllerContext.preInitDfd;delete a.__controllerContext.initDfd;var k=a.rootElement,c=[];try{var d=a.__meta;j(a,function(b,f,e){c.push(b);f=d&&d[e]&&d[e].rootElement?Q(d[e].rootElement,b,a):k;t(f,b.__controllerContext.controllerDef,b.__name);b.rootElement=f;b.view.__controller=b})}catch(f){B(a,f);return}b.resolveWith(a);ca(a)||!c.length&&function(){var b=!0;u(a.rootController,function(a){return b=a.isInit});return b}()&&H(a.rootController,"__postInit")}}}function i(a){return function(){if(!ca(a)){a.isPostInit=
!0;var b=a.__controllerContext.postInitDfd;delete a.__controllerContext.postInitDfd;b.resolveWith(a);!ca(a)&&a.__controllerContext.isRoot&&(u(a,function(a,b,k){if(!1!==(b&&b.__meta&&b.__meta[k]&&b.__meta[k].useHandlers)){var b=a.__controllerContext.cache.bindMap,k=O(a.rootElement),c;for(c in b)for(var d=A(a,b[c],a[c]),e=0,va=d.length;e<va;e++)f(d[e],k)}}),tb(a))}}}function ea(b){return function(){if(!ca(b)){b.isReady=!0;var k=b.__controllerContext.readyDfd;delete b.__controllerContext.readyDfd;k.resolveWith(b);
ca(b)||b.__controllerContext.isRoot&&b.rootElement&&b.isInit&&b.isPostInit&&b.isReady&&a(b.rootElement).trigger("h5controllerready",b)}}}function S(b,k){if(!x(b))return a(b);var c=a.trim(b);return pb.test(c)?(c=a.trim(c.substring(1,c.length-1)),a(p(c,O(k.rootElement),k))):a(k.rootElement).find(b)}function I(a,b,k,c){return{controller:a,selector:b,eventName:k,handler:c}}function la(a,b,k,c){return{controller:a,selector:b,eventName:typeof document.onmousewheel===ha?"DOMMouseScroll":k,handler:function(b){var k=
b.event;null==k.wheelDelta&&k.originalEvent&&null!=k.originalEvent.wheelDelta&&(k.wheelDelta=k.originalEvent.wheelDelta);null==k.wheelDelta&&k.originalEvent&&null!=k.originalEvent.detail&&(k.wheelDelta=40*-k.originalEvent.detail);c.call(a,b)}}}function Oa(b,k,c,d){function f(a,b){for(var k in a)a.hasOwnProperty(k)&&!b[k]&&"target"!==k&&"currentTarget"!==k&&"originalEvent"!==k&&"liveFired"!==k&&(b[k]=a[k]);b.h5DelegatingEvent=a}var e=typeof document.ontouchstart!==ha;if(c!==wa)return I(b,k,c,function(b){var k=
b.event.h5DelegatingEvent.type;if("mousemove"===k||"mouseup"===k){var k=b.event,c=a(k.currentTarget).offset()||{left:0,top:0};k.offsetX=k.pageX-c.left;k.offsetY=k.pageY-c.top}d.apply(this,arguments)});var o=a(O(b.rootElement));return function(){function g(k,c,d){return function(e){var i;a:{switch(k){case "touchstart":case "mousedown":i=wa;break a;case "touchmove":case "mousemove":i=ga;break a;case "touchend":case "mouseup":i=Fa;break a}i=void 0}var Ua=i===wa;if(!Ua||!h){var M=0===e.event.type.indexOf("touch");
M&&sb(e.event,k);var r=new a.Event(i);f(e.event,r);var m=e.event.target;c&&(m=c);d&&d(r);var J=e.event.originalEvent||e.event;Ua&&-1===a.inArray(J,ra)&&(ra=[],ya=[]);var E=a.inArray(J,ra);-1===E&&(E=ra.push(J)-1,ya[E]=!1);if(!ya[E]&&(!M||h||Ua))ya[E]=!0,a(m).trigger(r,e.evArg),h=!0;if(e.event.currentTarget===document&&(i===Fa&&(ra=[],ya=[]),-1!==a.inArray(J,ra)))ra.splice(E,1),ya.splice(E,1);if(Ua&&h){r.h5DelegatingEvent.preventDefault();i=r.target;var nb=r.clientX,l=r.clientY,U=M?"touchmove":"mousemove",
v=M?"touchend":"mouseup",B=g(U,i,function(a){var b=a.clientX,k=a.clientY;a.dx=b-nb;a.dy=k-l;nb=b;l=k}),n=g(v,i),K=function(a){e.event=a;e.evArg=$a(arguments);B(e)},da=function(a){e.event=a;e.evArg=$a(arguments);n(e)},D=M?a(i):o;j=function(){ra=[];ya=[];D.unbind(U,K);D.unbind(v,da);if(!M&&b.rootElement!==document){a(b.rootElement).unbind(U,K);a(b.rootElement).unbind(v,da)}};D.bind(U,K);D.bind(v,da);!M&&b.rootElement!==document&&(a(b.rootElement).bind(U,K),a(b.rootElement).bind(v,da))}else i===Fa&&
(j(),h=!1)}}}function i(a){return{controller:b,selector:k,eventName:a,handler:g(a)}}var j=null,h=!1,M=[I(b,k,c,d)];e&&M.push(i("touchstart"));M.push(i("mousedown"));return M}()}function sb(b,k){var c=b.originalEvent;if(c){var d="touchend"===k||"touchcancel"===k?c.changedTouches[0]:c.touches[0],f=d.pageX,e=d.pageY;b.pageX=c.pageX=f;b.pageY=c.pageY=e;b.screenX=c.screenX=d.screenX;b.screenY=c.screenY=d.screenY;b.clientX=c.clientX=d.clientX;b.clientY=c.clientY=d.clientY;d=b.target;if(d.ownerSVGElement)d=
d.farthestViewportElement;else if(d===window||d===document)d=document.body;if(d=a(d).offset())e-=d.top,b.offsetX=c.offsetX=f-d.left,b.offsetY=c.offsetY=e}}function $a(a){return 3>a.length?a[1]:xa(a).slice(1)}function Ea(b,k){var c=null,d=null;k&&(c=k[0],d=$a(k));var f=c;if(f&&null==f.offsetX&&null==f.offsetY&&f.pageX&&f.pageY){var e=f.target;if(e.ownerSVGElement)e=e.farthestViewportElement;else if(e===window||e===document)e=document.body;if(e=a(e).offset())f.offsetX=f.pageX-e.left,f.offsetY=f.pageY-
e.top}return new w(b.controller,c,d,b.evSelector,b.evSelectorType)}function ma(a){u(a,function(a){a.rootElement=null;a.view.__controller=null})}function Q(b,k,d){null==b&&c(qa,[k.__name]);!x(b)&&"object"!==typeof b&&c(U,[k.__name]);b=d?S(b,d):a(b);0===b.length&&c(Pa,[k.__name]);1<b.length&&c(Qa,[k.__name]);return b.get(0)}function tb(b){var k=b.__controllerContext.managed,c=Ha.controllers;-1===a.inArray(b,c)&&!1!==k&&c.push(b);!1!==k&&a(b.rootElement).trigger("h5controllerbound",b);H(b,"__ready")}
function mb(a){fa();setTimeout(function(){H(a,"__init")},0)}function ba(a,b){u(a,function(a){var k=fa();k.resolve();a.__controllerContext.templatePromise=k.promise();a.__controllerContext.initDfd=fa();a.initPromise=a.__controllerContext.initDfd.promise();a.__controllerContext.postInitDfd=fa();a.postInitPromise=a.__controllerContext.postInitDfd.promise();a.__controllerContext.readyDfd=fa();a.readyPromise=a.__controllerContext.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1;a.__controllerContext.isUnbinding=
!1;a.__controllerContext.isUnbinded=!1;a.__controllerContext.args=b})}function R(b,k){var c=null,d=k;a.isPlainObject(d)?c=d.target:d={};c=c?S(c,b):b.rootElement;return h.ui.indicator.call(b,c,d)}function r(a,b){var k=[],c=null;G(a,function(a){if(a[b]&&L(a[b])){try{var d=a[b]()}catch(f){c=c||f}qb(d)&&k.push(d)}});if(c)throw c;return k}function B(a,b,k){function c(){var a=b||k||i||h;G(f,function(b){b.view&&b.view.__view&&b.view.__view.clear();if(a)b.__controllerContext.isDisposed=1;else for(var k in b)b.hasOwnProperty(k)&&
(b[k]=null)});h?j.rejectWith(f,[h]):j.resolveWith(f);if(a&&(Ha.dispatchEvent({type:"lifecycleerror",detail:a,rootController:f}),b||i))throw b||i;}function d(){h=i||X(xb,f.__name,xa(arguments));c()}var f=a.__controllerContext&&(a.__controllerContext.isRoot?a:a.rootController);if(f){if(!T(f)&&!f.__controllerContext.isDisposing){f.__controllerContext.isDisposing=1;try{D(f,k||b)}catch(e){b=b||e}var o,i=null;try{o=r(f,"__dispose")}catch(g){b=b||g,i=i||g}var j=f.deferred(),h=null;i?d():$(o,c,d,!0);return j.promise()}}else if(b)throw b;
}function D(k,c){if(!ca(k)){k.__controllerContext.isUnbinding=1;db(k,c);var d;try{r(k,"__unbind")}catch(f){d=f}u(k,function(a){var k=a.rootElement;if(k){for(var k=O(k),c=a.__controllerContext.boundHandlers,d=0,f=c.length;d<f;d++)b(c[d],k,!0);a.__controllerContext.boundHandlers=[]}});k.__controllerContext.unbindList={};Ha.controllers=a.grep(Ha.controllers,function(a){return a!==k});k.isPostInit&&!1!==k.__controllerContext.managed&&a(k.rootElement).trigger("h5controllerunbound",k);ma(k);k.__controllerContext.isUnbinded=
1;if(d)throw d;}}function v(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?v(a,b.parentController):h.core.view}function T(a){return!a.__controllerContext||a.__controllerContext.isDisposed}function ca(a){return T(a)||a.__controllerContext.isUnbinding||a.__controllerContext.isUnbinded}function db(a,b){var k=["postInitDfd","readyDfd"],c=[];u(a,function(a){c.push(a);var k=a.__controllerContext.initDfd;k&&!Ba(k)&&!Ca(k)&&k.rejectWith(a,[b])});for(var d=0,f=k.length;d<f;d++)for(var e=
k[d],o=c.length-1;0<=o;o--){var i=c[o],g=i.__controllerContext[e];g&&!Ba(g)&&!Ca(g)&&g.rejectWith(i,[b])}}function oa(a,b){for(var k=a.childNodes,c=0,d=k.length;c<d;c++){var f=k[c];if(1===f.nodeType){if(f=oa(f,b))return f}else if(8===f.nodeType){var e=f.nodeValue;if(0===e.indexOf(yb)){var o=e.indexOf("}");if(-1!==o&&(e=e.slice(0,o).match(/id="([A-Za-z][\w-:\.]*)"/))&&e[1]===b)return f}}}return null}function Va(a){var b=this;return function(){return a.apply(b,arguments)}}function pa(a){var b=this;
return function(){var k=h.u.obj.argsToArray(arguments);k.unshift(this);return a.apply(b,k)}}function sa(a,b,k){function d(f){h.u.obj.getByPath("h5.core.view")||c(E);k=F(k)?k:[k];for(var e=[],o=0,i=k.length;o<i;o++){var g=Ia(k[o])?k[o]:h.res.require(k[o]);e.push(g.resolve("ejsfile"))}$(e,function(k){for(var k=F(k)?k:[k],c=0,d=k.length;c<d;c++)for(var f=k[c].templates,e=0,o=f.length;e<o;e++)try{a.view.__view.register(f[c].id,f[c].content)}catch(i){b.reject(i)}b.resolve()},function(a){var k=a.detail.error.status;
f===h.settings.dynamicLoading.retryCount||0!==k&&k!==jb?setTimeout(function(){b.reject(a)},0):setTimeout(function(){d(++f)},h.settings.dynamicLoading.retryInterval)})}d(0)}function za(b,k,d,f){var e=x(b),o=e?null:b,b=e?a.trim(b):null,k=a.trim(k),i=!e||pb.test(b),g=ua.test(k);g&&(k=a.trim(a.trim(k.substring(1,k.length-1))));e&&i&&(b=a.trim(b.substring(1,b.length-1)),"this"===b&&c(eb,[d.__name],{controllerDef:d}));return{selector:b,bindTarget:o,isGlobal:i,isBindRequested:g,eventName:k,propertyKey:f}}
function fb(){this.logicProperties=[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function o(b){var k=new fb,d=k.logicProperties,f=k.eventHandlerProperties,e=k.functionProperties,o=k.otherProperties,i=k.bindMap,g=k.childControllerProperties,h={},j;for(j in b)if(-1!==j.indexOf(" ")&&L(b[j])){f.push(j);var M=a.trim(j),r=M.lastIndexOf(" "),M=za(M.substring(0,r),M.substring(r+1,M.length),b,j),r=M.selector,m=M.eventName,
J=M.isGlobal,E=M.isBindRequested;h[r]||(h[r]={});h[r][m]||(h[r][m]={});h[r][m][J]||(h[r][m][J]={});h[r][m][J][E]?c(Wa,[b.__name,r,m],{controllerDef:b}):h[r][m][J][E]=1;i[j]=M}else Ra(j,Y)&&b[j]&&!L(b[j])?g.push(j):Ra(j,bb)&&b[j]&&!L(b[j])?d.push(j):L(b[j])?e.push(j):o.push(j);return k}function K(){this.logicProperties=[];this.functionProperties=[]}function da(a){var b=new K,k=b.functionProperties,c=b.logicProperties,d;for(d in a)a.hasOwnProperty(d)&&Ra(d,bb)?c.push(d):L(a[d])&&k.push(d);return b}
function gb(b,k){function c(b,k,d){k=k.__logicContext.waitingPromises=k.__logicContext.waitingPromises||[];-1===a.inArray(b,k)&&(k.push(b),b.done(d))}function f(o){function i(){if(!o.__logicContext.isCalledReady){var f=!0;d(o,function(a){return f=a.__logicContext.isReady});if(f){var g=L(o.__ready)&&o.__ready();o.__logicContext.isCalledReady=!0;qb(g)?(e.push(g),g.done(function(){o.__logicContext.isReady=!0;e.splice(a.inArray(g,e),1);o.__logicContext.waitingPromises=null;o===b&&k.resolveWith(o)})):
(o.__logicContext.isReady=!0,o.__logicContext.waitingPromises=null,o===b&&k.resolveWith(o))}else for(var j=0,h=e.length;j<h;j++)c(e[j],o,i)}}o.__logicContext.isReady=!1;o.__logicContext.isCalledReady=!1;d(o,f);i()}var e=[];f(b)}function Xa(a,b){if(a===b)return!0;var k=hb(a),c=hb(b);if(!k&&!c)return!1;k=k?a.toArray():[a];c=c?b.toArray():[b];if(k.length!==c.length)return!1;for(var d=0,f=k.length;d<f;d++)if(k[d]!==c[d])return!1;return!0}function V(a,b){(!a||!a.rootElement)&&c(zb,b)}function Z(a,b){(!a||
T(a))&&c(Ab,b)}function Ga(b){var k=b.bindTarget,c=b.eventName,d=b.handler;k&&typeof k.nodeType!==ha||ib(k)||hb(k)?a(k).bind(c,d):!k||!k.addEventListener?b.isBindCanceled=!0:(k.addEventListener(c,d),b.isNativeBind=!0)}function Ya(a){this.__controller=a;h.u.obj.getByPath("h5.core.view")&&(this.__view=h.core.view.createView())}function Ja(a,b,k,c,d){this.__name=b;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:d,boundHandlers:[],controllerDef:k};this.__controllerContext.args=
c?c:null;this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=h.log.createLogger(b);this.view=new Ya(this)}function Sa(){this.rootElement=document;this.controllers=[];a(document).bind(Ka,function(a,b){null==b.target&&(b.target=document);b.indicator=R(this,b);a.stopPropagation()})}function Ta(){this._init()}function Aa(b,k,d,f){var i=!f||!f.isInternal;if(!i&&T(f.rootController))return null;
var g=k.__name;(!x(g)||0===a.trim(g).length)&&!Ia(k)&&c(La,null,{controllerDefObj:k});d&&!a.isPlainObject(d)&&c(Ma,[g],{controllerDefObj:k});k.__controllerContext&&c(ja,null,{controllerDefObj:k});var j=na.get(g);j||l(i,b,k,d,g);i&&y(k,g);j||(j=o(k),na.register(g,j));i&&t(b,k,g);var h=new Ja(b?a(b).get(0):null,g,k,d,i),M=i?h:f.rootController,r=fa(),g=r.promise().fail(Za),m=fa(),J=m.promise().fail(Za),E=fa(),U=E.promise().fail(Za),v=fa(),K=v.promise();i||K.fail(Za);b=h.__controllerContext;b.cache=j;
b.preInitDfd=r;b.initDfd=m;b.postInitDfd=E;b.readyDfd=v;h.preInitPromise=g;h.initPromise=J;h.postInitPromise=U;h.readyPromise=K;for(var n=i?[]:f.promisesForTriggerInit,m=0,J=j.logicProperties.length;m<J;m++)E=j.logicProperties[m],g=k[E],Ia(g)?(U=g.resolve("namespace"),n.push(U),U.done(function(b,k){return function(c){c=ta(c);h[b]=c;n.splice(a.inArray(k,n),1);n.push(c.readyPromise);c.readyPromise.done(function(b){return function(){n.splice(a.inArray(b,n),1)}}(c.readyPromise))}}(E,U))):h[E]=ta(g);g=
a.extend(!0,{},k);k=k.__templates;m=fa();J=m.promise();Ia(k)||k&&0<k.length?sa(h,m,k):m.resolve();J.done(function(){!T(h)&&!h.__controllerContext.isDisposing&&r.resolveWith(h)}).fail(function(a){r.rejectWith(h,[a]);B(h,null,a)});m=0;for(J=j.eventHandlerProperties.length;m<J;m++)E=j.eventHandlerProperties[m],h[E]=e(g,E,!0);m=0;for(J=j.functionProperties.length;m<J;m++)E=j.functionProperties[m],h[E]=e(g,E);m=0;for(J=j.otherProperties.length;m<J;m++)E=j.otherProperties[m],h[E]=g[E];b.managed=f&&f.managed;
try{if(h.__construct&&h.__construct({args:h.__controllerContext.args}),T(h)||h.__controllerContext.isDisposing)return null}catch(da){return B(M,da),null}i?(h.rootController=h,h.parentController=null):(h.parentController=f.parentController,h.rootController=f.rootController);m=0;for(J=j.childControllerProperties.length;m<J;m++)if(E=j.childControllerProperties[m],f=g[E],Ia(f))U=f.resolve("namespace"),n.push(U),U.done(function(b,k){return function(c){c=Aa(null,a.extend(true,{},c),d,{isInternal:true,parentController:h,
rootController:M,promisesForTriggerInit:n});if(c==null)return null;h[b]=c;n.splice(a.inArray(k,n),1)}}(E,U));else{f=Aa(null,a.extend(!0,{},g[E]),d,{isInternal:!0,parentController:h,rootController:M});if(null==f)return null;h[E]=f}if(i){var D=function(){n.length===0?mb(h):$(n,D)};$(n,D)}return h}function ta(b){function d(b,f){var o=b.__name;(!x(o)||0===a.trim(o).length)&&c(k,null,{logicDefObj:b});b.__logicContext&&c(M,null,{logicDefObj:b});var g=na.get(o);g||(f&&q(b),g=da(b));for(var j=a.extend(!0,
{},b),m=g.functionProperties,r=0,E=m.length;r<E;r++){var J=m[r];j[J]=e(j,J)}j.deferred=fa;j.log=h.log.createLogger(o);j.__logicContext={logicDef:b};j.own=Va;j.ownWithOrg=pa;na.register(o,g);L(j.__construct)&&j.__construct();o=g.logicProperties;r=0;for(E=o.length;r<E;r++)J=o[r],g=j[J],Ia(g)?(g=g.resolve(),i.push(g),g.done(function(b,k){return function(c){j[b]=d(c);i.splice(a.inArray(k,i),1)}}(J,g))):j[J]=d(g);return j}function f(){0===i.length?gb(j,o):$(i,f)}var o=h.async.deferred(),g=o.promise(),
i=[],j=d(b,!0);j.readyPromise=g;$(i,f);return j}var P={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},Y="Controller",bb="Logic",wa="h5trackstart",ga="h5trackmove",Fa="h5trackend",ia="rootElement",Ka="triggerIndicator",pb=/^\{.*\}$/,ua=/^\[.*\]$/,yb="{h5view ",qa=6001,Pa=6003,Qa=6004,La=6006,Ma=6007,ja=6008,ub=6009,vb=6010,ab=6011,eb=6012,Wa=6013,k=6017,M=6018,E=6029,U=6030,J=6033,wb=6034,zb=6035,Ab=6036,xb=6038,fa=h.async.deferred,qb=h.async.isPromise,ob=h.u.str.startsWith,Ra=
h.u.str.endsWith,Bb=h.u.str.format,xa=h.u.obj.argsToArray,hb=h.u.obj.isJQueryObject,Ia=h.res.isDependency,Za=function(){},Ha,na,ra=[],ya=[],cb="",ka=function(){var a=document.createElement("div");return typeof a.style.touchAction!==ha?(cb="touchAction",!0):typeof a.style.msTouchAction!==ha?(cb="msTouchAction",!0):!1}();a.extend(w.prototype,P);a.extend(Ya.prototype,{get:function(a,b){V(this.__controller,"view#get");return v(a,this.__controller).get(a,b)},update:function(a,b,k){V(this.__controller,
"view#update");a=S(a,this.__controller);return v(b,this.__controller).update(a,b,k)},append:function(a,b,k){V(this.__controller,"view#append");a=S(a,this.__controller);return v(b,this.__controller).append(a,b,k)},prepend:function(a,b,k){V(this.__controller,"view#prepend");a=S(a,this.__controller);return v(b,this.__controller).prepend(a,b,k)},load:function(a){V(this.__controller,"view#load");return this.__view.load(a)},register:function(a,b){V(this.__controller,"view#register");this.__view.register(a,
b)},isValid:function(a){V(this.__controller,"view#isValid");return this.__view.isValid(a)},isAvailable:function(a){V(this.__controller,"view#isAvailable");return v(a,this.__controller).isAvailable(a)},clear:function(a){V(this.__controller,"view#clear");this.__view.clear(a)},getAvailableTemplates:function(){V(this.__controller,"view#getAvailableTemplates");return this.__view.getAvailableTemplates()},bind:function(b,k){V(this.__controller,"view#bind");var c=b;if(x(b)&&0===b.indexOf("h5view#")){for(var d=
oa(this.__controller.rootElement,b.slice(7)),c=d.nodeValue,c=c.slice(c.indexOf("}")+1),f=a("<div>").append(c),c=[],e=f[0].childNodes,o=0,g=e.length;o<g;o++)c.push(e[o]);f.empty();f=document.createDocumentFragment();o=0;for(g=c.length;o<g;o++)f.appendChild(c[o]);d.parentNode.insertBefore(f,d.nextSibling)}return this.__view.bind(c,k)}});a.extend(Ja.prototype,{$find:function(b){Z(this,"$find");V(this,"$find");return a(this.rootElement).find(b)},deferred:function(){Z(this,"deferred");return fa()},trigger:function(b,
k){Z(this,"trigger");V(this,"trigger");var c=x(b)?a.Event(b):b;a(this.rootElement).trigger(c,k);return c},own:function(){Z(this,"own");return Va.apply(this,xa(arguments))},ownWithOrg:function(){Z(this,"ownWithOrg");return pa.apply(this,xa(arguments))},bind:function(a,b){Z(this,"bind");this.__controllerContext.isRoot||c(6031);this.rootElement=Q(a,this);this.view.__controller=this;ba(this,b?b:null);mb(this);return this},unbind:function(){Z(this,"unbind");V(this,"unbind");this.__controllerContext.isRoot||
c(6031);this.rootController||c(6037);try{D(this)}catch(a){B(this,a)}},dispose:function(){Z(this,"dispose");this.__controllerContext.isRoot||c(6031);return B(this)},triggerIndicator:function(b){Z(this,"triggerIndicator");V(this,"triggerIndicator");var k={indicator:null};b&&a.extend(k,b);a(this.rootElement).trigger(Ka,[k]);return k.indicator},indicator:function(a){Z(this,"indicator");V(this,"indicator");return R(this,a)},enableListeners:function(){Z(this,"enableListeners");m(this,!0)},disableListeners:function(){Z(this,
"disableListeners");m(this,!1)},throwError:function(a,b){Z(this,"throwError");var k=xa(arguments);k.unshift(null);this.throwCustomError.apply(this,k)},throwCustomError:function(a,b,k){Z(this,"throwCustomError");2>arguments.length&&c(6005);var d=null;b&&x(b)?d=Error(Bb.apply(null,xa(arguments).slice(1))):(d=Error(),d.detail=b);d.customType=a;throw d;},on:function(a,b,k){Z(this,"on");V(this,"on");a=za(a,b,this);k=A(this,a,k);a=0;for(b=k.length;a<b;a++)f(k[a],O(this.rootElement))},off:function(a,k,c){Z(this,
"off");V(this,"off");for(var d=za(a,k,this),a=this.__controllerContext.boundHandlers,f=null,e=d.bindTarget,k=d.eventName,o=d.selector,g=d.isGlobal,d=d.isBindRequested,i=0,j=a.length;i<j;i++){var h=a[i];if(e){if(Xa(e,h.bindTarget)&&k===h.eventName&&h.originalHandler===c){f=h;break}}else if(o===h.selector&&g===h.isGlobal&&d===h.isBindRequested&&c===h.originalHandler){f=h;break}}f&&b(f,O(this.rootElement))}});h.mixin.eventDispatcher.mix(Sa.prototype);a.extend(Sa.prototype,{getAllControllers:function(){return this.controllers},
getControllers:function(b,k){for(var c=k&&k.deep,d=k&&k.name?N(k.name):null,f=a(b)[0],e=this.controllers,o=[],g=0,i=e.length;g<i;g++){var j=e[g];!(d&&-1===a.inArray(j.__name,d))&&j.rootElement&&(f===j.rootElement?o.push(j):c&&O(f)===O(j.rootElement)&&a.contains(f,j.rootElement)&&o.push(j))}return o}});a.extend(Ta.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap=
{}}});na=new Ta;Ha=new Sa;h.u.obj.expose("h5.core",{controllerManager:Ha,definitionCacheManager:{clear:function(a){na.clear(a)},clearAll:function(){na.clearAll()}}});var Da=function(){var a={},b=new Ja(null,"a"),k;for(k in b)b.hasOwnProperty(k)&&"__name"!==k&&"__templates"!==k&&"__meta"!==k&&(a[k]=1);b=Ja.prototype;for(k in b)b.hasOwnProperty(k)&&(a[k]=null);return a}();kb.controllerInternal=Aa;h.u.obj.expose("h5.core",{controller:function(a,b,k){2>arguments.length&&c(6032);return Aa(a,b,k)},logic:ta,
expose:function(a){var b=a.__name;b||c(6019,null,{target:a});var k=b.lastIndexOf(".");if(-1===k)window[b]=a;else{var d=b.substr(0,k),b=b.substr(k+1,b.length),k={};k[b]=a;h.u.obj.expose(d,k)}}})})();(function(){function l(a){return(a=a&&x(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function y(b,c){return function U(b,k){if(!c[b])return!1;for(var d=0,f=c[b].length;d<f;d++)if(-1<a.inArray(c[b][d],k)||U(c[b][d],
k.concat([b])))return!0;return!1}(b,[])}function q(a){return"number"===typeof a&&isNaN(a)}function t(a,b){return null==a||q(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(x(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function w(a,b){return null==a||"number"===typeof a&&parseInt(a)===a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function g(b,d,f){function e(){o.push(A.call(this,
arguments));if(f)throw null;}var o=[];try{if(!a.isPlainObject(b))throw e(oa),null;ga(b.name)||e(Va);var g=b.base,i=null;if(null!=g)if(!x(g)||0!==g.indexOf("@"))e(pa);else{var j=g.substring(1);d.models[j]?i=d.models[j].schema:e(sa,j)}var h=b.schema;!i&&null==h&&e(za);if(!i&&!a.isPlainObject(h))throw e(fb),null;}catch(m){c(R,null,o)}}function e(b,d,f,e){function g(){i.push(A.call(this,arguments));if(e)throw null;}"object"!==typeof b&&c(B);var i=[];try{if(d){var j=!1,h;for(h in b)b[h]&&!0===b[h].id&&
(j&&g(o),j=!0);j||g(K)}var m={},j=function(a){if(null!=a){s&&g(gb,n);p.hasOwnProperty("defaultValue")&&g(ka,n);if(null==a.on)g(Xa,n);else for(var c=N(a.on),d=0,f=c.length;d<f;d++)if(!b.hasOwnProperty(c[d])){g(Xa,n);break}"function"!==typeof a.calc&&g(V,n);m[n]=N(a.on)}};h=function(a){s&&null==a&&(a="string");var b={};null!=a&&(x(a)?(s&&"string"!==a&&"integer"!==a&&g(Ca,n),b=l(a),b.elmType?(b.dataModel&&(d||g(Ga,n,b.dataModel),f.models[b.dataModel]||g(Ya,n,b.dataModel)),"enum"===b.elmType&&null==p.enumValue&&
g(Ja,n)):g(Ga,n,a)):g(Z,n))};var r=function(b,k){if(null!=b)if(a.isPlainObject(b)){for(var c in b){var d=b[c];if(null!=d)switch(c){case "notNull":!0!==d&&!1!==d?g(Ta,n,c):s&&!d&&g(Ka,n,c,d);break;case "min":case "max":switch(k.elmType){case "integer":(x(d)||!w(d)||q(d))&&g(Aa,n,c);break;case "number":(x(d)||x(d)||!t(d)||Infinity===d||-Infinity===d||q(d))&&g(Aa,n,c);break;default:g(ta,n,c,k.elmType)}break;case "minLength":case "maxLength":switch(k.elmType){case "string":x(d)||!w(d)||q(d)||0>d?g(aa,
n,c):s&&"maxLength"===c&&0===d&&g(Ka,n,c,d);break;default:g(ta,n,c,k.elmType)}break;case "notEmpty":switch(k.elmType){case "string":!0!==d&&!1!==d?g(Ta,n,c):s&&!d&&g(Ka,n,c,d);break;default:g(ta,n,c,k.elmType)}break;case "pattern":switch(k.elmType){case "string":"regexp"!==a.type(d)&&g(Y,n,c);break;default:g(ta,n,c,k.elmType)}}}b.notEmpty&&0===b.maxLength&&g($,n,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&g($,n,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&
g($,n,"minLength","maxLength")}else g(Sa,n)},v=function(b,k){null!=b&&("enum"!==k.elmType&&g(wa,n),(!F(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&g(ia,n))},n;for(n in b){var p=null==b[n]?{}:b[n],s=d&&!!p.id;ga(n)||g(da,n);j(p.depend);h(p.type);var T={},u=s&&null==u?"string":p.type;x(u)&&(T=l(u));r(p.constraint,T);v(p.enumValue,T);s&&p.hasOwnProperty("defaultValue")&&g(Fa,n)}for(var H in m)y(H,m)&&g(Ba,H)}catch(C){c(D,null,i)}return!0}function s(a,b){var d=[];try{for(var f in a){var e=
a[f];if(e&&(e.hasOwnProperty("defaultValue")||!e.type||!("array"===e.type||l(e.type).dimension))&&e.hasOwnProperty("defaultValue")){var g=e.defaultValue;b[f](g).length&&pushErrorReason(ua,f,g)}}return!0}catch(o){c(D,null,d)}}function p(a,b,c){var f={},e;for(e in a){var g=f,o=e,i;i=c;var h=a[e]||{},m=[],r=null,n=0,r=h.type,v=h.constraint||{};b&&h.id&&(r=r||"string",v.notNull=!0,"string"===r&&(v.notEmpty=!0));r&&(n=l(r),r=n.elmType,n=n.dimension,m.push(d(r,{manager:i,enumValue:h.enumValue})));v&&m.push(j(v));
i=u({checkFuncs:m,dimension:n});g[o]=i}return f}function j(a){return function(b){var c=[];a.notNull&&null==b&&c.push({notNull:a.notNull});a.notEmpty&&!b&&c.push({notEmpty:a.notEmpty});if(null==b)return c;null!=a.min&&b<a.min&&c.push({min:a.min});null!=a.max&&a.max<b&&c.push({max:a.max});null!=a.minLength&&b.length<a.minLength&&c.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&c.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&c.push({pattern:a.pattern});return c}}
function d(b,c){var d=[{type:b}];switch(b){case "number":return function(a,b){return t(a,b)?[]:d};case "integer":return function(a,b){return w(a,b)?[]:d};case "string":return function(a,b){return null==a||x(a)||!b&&a instanceof String?[]:d};case "boolean":return function(a,b){return null==a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:d};case "enum":return function(b){var k;a:if(k=c.enumValue,q(b)){for(var b=0,f=k.length;b<f;b++)if(q(k[b])){k=!0;break a}k=!1}else k=null===b||-1<a.inArray(b,
k);return k?[]:d};case "any":return function(){return[]}}var f=b.match(/^@(.+?)$/)[1],e=c.manager;return function(a){var b=e.models[f];return!b||"object"!==typeof a&&null!=a?d:null==a||b.has(a)?[]:d}}function u(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var c=a.dimension||0;return function(a,k){function d(a,e){if(!e){for(var g=0,o=b.length;g<o;g++){var i=b[g](a,k);if(i.length)return f=f.concat(i),!1}return!0}if(null==a)return!0;if(!F(a)&&!h.core.data.isObservableArray(a))return f.push({dimension:c}),
!1;g=0;for(o=a.length;g<o;g++)if(!d(a[g],e-1))return!1;return!0}var f=[];d(a,c);return f}}function G(a,b){a._values={};a._nullProps={};for(var c in b)if(b[c]&&z(b[c].type)){var d=ma();d.relatedItem=a;a._values[c]=d;a._nullProps[c]=!0}}function z(a){return!a?!1:-1!==a.indexOf("[]")}function A(){return{code:arguments[0]}}function f(b,d,f,e){function g(c){for(var c=N(j[c].depend.on),d=0,f=c.length;d<f;d++)if(-1===a.inArray(c[d],b._realProperty)&&-1!==a.inArray(c[d],i))return!1;return!0}function o(b,
k){for(var c=0,d=k.length;c<d;c++){var f=h[k[c]];if(f)for(var e=0,g=f.length;e<g;e++){var i=f[e];-1===a.inArray(i,b)&&b.push(i)}}}var i=[],j=b.schema||b._model.schema,h=b._dependencyMap,m={};for(e?i=b._dependProps.slice():o(i,N(f));0!==i.length;){for(var f=[],e=0,r=i.length;e<r;e++){var n=i[e];if(g(n)){var v=j[n].depend.calc.call(b,d);0!==b._validateItemValue(n,v,!0).length&&c(db,[b._model?b._model.name:qa,n,v]);m[n]={oldValue:b._values[n],newValue:v};j[n]&&z(j[n].type)?v?(b._values[n].copyFrom(v),
b._nullProps[n]=!1):(b._values[n].copyFrom([]),b._nullProps[n]=!0):b._values[n]=v}else f.push(n)}o(f,i);i=f}return m}function b(a,b,d,f){for(var e in d){e in a||c(ca,[f?f.name:qa,e]);var g=d[e];if(!a[e]||!z(a[e].type)||d.hasOwnProperty(e))g=b(e,g,f&&f._idKey===e),0<g.length&&c(v,[f?f.name:qa,e],g)}}function m(b,d,e,g){var o=b.schema||b._model.schema,i=[],j;for(j in d)if(!(e&&-1!==a.inArray(j,e))){var m=b._values[j],r=d[j];if(o[j]&&o[j].depend)m!==r&&c(T,[b._model?b._model.name:qa,j]);else{var n=o[j]&&
o[j].type;z(n)&&(null==r?(r=[],b._nullProps[j]=!0):b._nullProps[j]=!1);if(n&&n.match(/string|number|integer|boolean/)){var v=r;if(F(v)){for(var v=v.slice(0),r=0,l=v.length;r<l;r++)v[r]=v[r]&&"object"===typeof v[r]?v[r]&&v[r].valueOf&&v[r].valueOf():v[r];r=v}else r=v&&"object"===typeof v&&v.valueOf?v.valueOf():v}if(null!=r&&n&&n.match(/number|integer/)&&"number"!==typeof r)if(F(r)||h.core.data.isObservableArray(r)){v=0;for(l=r.length;v<l;v++)null!=r[v]&&t(r[v])&&(r[v]=parseFloat(r[v]))}else null!=
r&&(r=parseFloat(r));if(!z(n)||!m||!m.equals(r,m))m===r||q(m)&&q(r)||(n&&-1!==n.indexOf("[]")&&h.core.data.isObservableArray(m)&&(m=m.toArray()),i.push({p:j,o:m,n:r}))}}if(i.length){d={};e=[];v=0;for(j=i.length;v<j;v++)m=i[v],o[m.p]&&z(o[m.p].type)?m.n&&b._values[m.p].copyFrom(m.n):b._values[m.p]=m.n,d[m.p]={oldValue:m.o,newValue:b.get(m.p)},e.push(m.p);o={type:!0===g?"create":"change",target:b,props:d};a.extend(d,f(b,o,e,g));return o}}function n(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs=
{});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function H(a,b,c){if(a._manager)for(var d=n(a),f=0,e=c.length;f<e;f++){var g=c[f],o=g._values[a._idKey];d[o]||(d[o]=[]);d[o].push({type:b,item:g})}}function C(a,b){if(a._manager){var c=n(a),d=b.target._values[a._idKey];c[d]||(c[d]=[]);c[d].push({type:Pa,ev:b})}}function i(b){var c={},d;for(d in b)if(b.hasOwnProperty(d)){var f=b[d]?b[d].depend:null;if(f)for(var f=N(f.on),e=0,g=f.length;e<g;e++){var o=f[e];c[o]||(c[o]=[]);-1===a.inArray(d,
c[o])&&c[o].push(d)}}return c}function ea(b,c){g(b,c,!0);var d;d=(d=b.base)?c.models[d.slice(1)].schema:{};d=a.extend({},d,b.schema);e(d,!0,c,!0);var f=p(d,!0,c);s(d,f,!0);return new Oa(d,b,f,c)}function S(b,c){var d=[],f=[],e=[],g;for(g in b)b[g]&&b[g].depend?f.push(g):d.push(g),b[g]&&b[g].type&&-1!==b[g].type.indexOf("[]")&&e.push(g);g=i(b);var o={},j;for(j in b){var h=b[j];if(!h||!h.depend){var r=null,r=h&&void 0!==h.defaultValue?h.defaultValue:null;o[j]=r}}return{_realProps:d,_dependProps:f,_aryProps:e,
_dependencyMap:g,_createInitialValueObj:function(b){if(!b)return a.extend({},o);var c=a.extend({},o),d;for(d in b)c[d]=b[d];return c},_validateItemValue:function(a,b,d){return c[a](b,d)}}}function I(b,d,f,e){var g=!1,o=["sort","reverse","pop","shift"],i=null;f.addEventListener("changeBefore",function(f){e&&(b._isRemoved||!e._manager)&&c(r,[b._values[e._idKey],f.method]);var j=h.u.obj.argsToArray(f.args);if(-1===a.inArray(f.method,o)){var m=!0;switch(f.method){case "splice":m=!1;j.shift();j.shift();
break;case "copyFrom":j=j[0];break;case "set":j.shift()}m&&(f=b._validateItemValue(d,j),0<f.length&&c(v,d,f))}e?(e._manager&&(f=e._manager,j=e.name,f._oldValueLogs||(f._oldValueLogs={}),f._oldValueLogs[j]||(f._oldValueLogs[j]={}),f=f._oldValueLogs[j],j=b._values[e._idKey],f[j]||(f[j]={}),f[j][d]||(f[j][d]=b._values[d].toArray())),(g=e._manager?e._manager.isInUpdate():!1)||e._manager.beginUpdate()):i=b._values[d].toArray()});f.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var c=
{type:"change",target:b,props:{}};c.props[d]={};e?(C(e,c),g?a.stopImmediatePropagation():(e._manager._isArrayPropChangeSilentlyRequested=!0,e._manager.endUpdate(),e._manager._isArrayPropChangeSilentlyRequested=!1)):f.equals(i)||(c.props[d]={oldValue:i,newValue:b._values[d]},b.dispatchEvent(c))}})}function la(a){ga(a)||c(ba);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function Oa(a,b,c,d){this.items={};this.size=0;this.name=b.name;this._manager=d;for(var f in a)a[f]&&
a[f].id&&(this._idKey=f);this._idType=(b=a[this._idKey].type)?"string"===b?W:X:W;this.schema=a;this._itemConstructor=O(a,c,this);d.models[this.name]=this}function O(c,d,f){function e(a){G(this,c,g,a);a=g._createInitialValueObj(a);b(c,g._validateItemValue,a,f);m(this,a,null,!0);for(var a=g._aryProps,d=0,o=a.length;d<o;d++)I(this,a[d],this.get(a[d]),f)}var g=S(c,d);f._schemaInfo=g;h.mixin.eventDispatcher.mix(e.prototype);a.extend(e.prototype,g,Qa,{_model:f,_isRemoved:!1,getModel:function(){return this._isRemoved?
null:this._model}});return e}function P(){}function Ea(){this.length=0;this._src=[]}function ma(){return new Ea}function Q(a){return a&&a.constructor===Ea?!0:!1}var W="string",X="number",ba=15E3,R=15001,r=15005,B=15008,D=15009,v=15011,T=15012,ca=15013,db=15016,oa=15900,Va=15901,pa=15902,sa=15903,za=15904,fb=6,o=15800,K=15801,da=15802,gb=15803,Xa=15804,V=15805,Z=15806,Ga=15807,Ya=15808,Ja=15809,Sa=15810,Ta=15811,Aa=15812,ta=15813,Y=15814,aa=15815,$=15816,wa=15817,ia=15818,Fa=15819,ua=15820,Ka=15821,
ka=15822,Ba=15823,Ca=15824,qa="n/a",Pa=2,Qa={get:function(b){if(0===arguments.length)return a.extend({},this._values);var d=this._model;(d?d.schema:this.schema).hasOwnProperty(b)||c(15014,[d?d.name:qa,b]);return this._values[b]},set:function(a){var d=a;2===arguments.length&&(d={},d[arguments[0]]=arguments[1]);var f=this._model;f&&(this._isRemoved||!f._manager)&&c(r,[this._values[this._model._idKey],"set"],this);if(f)f._idKey in d&&d[f._idKey]!==this._values[f._idKey]&&c(15003,[f.name,this._idKey]),
b(f.schema,f._schemaInfo._validateItemValue,d,f);else{var e=this.validate(d);if(e)throw e;}var e=null,g=f?f._manager.isInUpdate():!1;f&&!g&&f._manager.beginUpdate();this._isInSet=!0;e=m(this,d);this._isInSet=!1;f?(e&&C(f,e),g||f._manager.endUpdate()):e&&this.dispatchEvent(e)},regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?
!0:!1}};h.mixin.eventDispatcher.mix(la.prototype);a.extend(la.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&c(R,null,[A(oa)]);if(!F(b))return this.models[b.name]?this.models[b.name]:ea(b,this);var d=b.length;d||c(R,null,[A(oa)]);for(var f={},e=[],g=0;g<d;g++){var o=b[g].name;if(this.models[o])m[g]=manager.models[b.name];else try{e.push(o);o=[];b[g].base&&o.push(b[g].base.substring(1));for(var j in b[g].schema){var i=b[g].schema[j];if(i){var h=i.type;h&&"@"===h.substring(0,1)&&(h=-1===
h.indexOf("[]")?h.substring(1):h.substring(1,h.length-2),o.push(h))}}f[g]={depends:o}}catch(r){c(R)}}for(var m={size:0};m.size<d;){j={};i=!1;for(g=0;g<d;g++)if(!f[g].registed){for(var o=f[g].depends,h=0,n=o.length;h<n;h++)if(!this.models[o[h]]){j[o[h]]=!0;break}h===n&&(m[g]=ea(b[g],this),m.size++,i=!0,f[g].registed=!0)}if(!i){var g=!0,v;for(v in j)if(-1===a.inArray(v,e)){g=!1;break}g&&c(15004);c(R,null,[A(sa,v)])}}b=[];for(g=0;g<d;g++)b.push(m[g]);return b},dropModel:function(a){if((a=x(a)?a:"object"===
typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var d={},f;for(f in b)if(b.hasOwnProperty(f)){var e;e=this.models[f];var g=b[f],o=[],j=[],i=[],h=[],m=
void 0;for(m in g){for(var r=g[m],n=!0,v=[],l=r.length-1;0<=l;l--){var K=r[l],B=K.type;if(B===Pa)v.push(K.ev);else{a:{for(n=0;n<l;n++){var da=r[n].type;if(1===da||3===da){l=r[n];break a}}l=null}if(1===B)l&&3===l.type?o.push({id:m,oldItem:l.item,newItem:K.item}):j.push(K.item);else if(l=l&&3===l.type?l.item:l?null:K.item)h.push(l),l.dispatchEvent({type:"remove",model:e});n=!1;break}}if(n&&0<v.length){K={};for(l=v.length-1;0<=l;l--)for(var D in v[l].props)K[D]||(Q(e.get(m).get(D))?(B=c&&c[e.name]&&
c[e.name][m]&&c[e.name][m][D],e.get(m).get(D).equals(B)||(K[D]={oldValue:B})):K[D]={oldValue:v[l].props[D].oldValue});l=!1;for(D in K)B=K[D].oldValue,r=e.get(m).get(D),B===r||q(B)&&q(r)?delete K[D]:(l=e.get(m).get(D),a&&Q(l)&&l.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),K[D].newValue=l,l=!0);l&&(v={type:"change",target:v[0].target,props:K},i.push(v),v.target.dispatchEvent(v))}}(e=0===j.length&&0===o.length&&0===h.length&&0===i.length?!1:{created:j,recreated:o,removed:h,
changed:i})&&(d[f]=e)}a=!1;for(f in d)a=!0,e=d[f],this.models[f].dispatchEvent({type:"itemsChange",created:e.created,recreated:e.recreated,removed:e.removed,changed:e.changed});d={type:"itemsChange",models:d};a&&this.dispatchEvent(d)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});h.mixin.eventDispatcher.mix(Oa.prototype);a.extend(Oa.prototype,{create:function(a){this._manager||c(15006,[this.name,"create"]);
var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var d=[],f=N(a),e=[],g=this._idKey,o=0,j=f.length;o<j;o++){var i=f[o],h=i[g],r=this._findById(h);r?(e.push(r),(h=m(r,i,[g]))&&C(this,h)):(i=new this._itemConstructor(i),this.items[h]=i,this.size++,d.push(i),e.push(i))}0<d.length&&H(this,1,d);b||this._manager.endUpdate();return F(a)?e:e[0]},validate:function(a,d){try{var f=this._idKey,e=N(a);"object"!==typeof a&&!F(a)&&c(15007);if(d)for(var g=
0,o=e.length;g<o;g++){var i=e[g],j=i[f];(""===j||null==j)&&c(15002,[this.name,f]);var h=this._schemaInfo._createInitialValueObj(i);b(this.schema,this._schemaInfo._validateItemValue,h,this)}else for(var g=0,r=e.length;g<r;g++)i=e[g],b(this.schema,this._schemaInfo._validateItemValue,i,this)}catch(m){return m}return null},get:function(a){if(F(a)||h.core.data.isObservableArray(a)){for(var b=[],c=0,d=a.length;c<d;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||
c(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var d=this._idKey,f=N(a),e=[],g=[],o=0,i=f.length;o<i;o++)if(this.has(f[o])){var j=x(f[o])||w(f[o],!0)?f[o]:f[o]._values[d],h=this.items[j];delete this.items[j];this.size--;g.push(h);h._model&&(h._isRemoved=!0);e.push(h)}else g.push(null);0<e.length&&H(this,3,e);b||this._manager.endUpdate();return F(a)?g:g[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},
has:function(a){return x(a)||w(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&L(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===ha?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&
a.push(b[c]);return a}});h.mixin.eventDispatcher.mix(P.prototype);a.extend(P.prototype,Qa,{validate:function(a){try{var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);b(this.schema,this._validateItemValue,c)}catch(d){return d}return null}});h.mixin.eventDispatcher.mix(Ea.prototype);var La={equals:function(a){var b=this.length;if(!F(a)&&!Q(a)||a.length!==b)return!1;for(var a=Q(a)?a._src:a,c=0;c<b;c++){var d=this[c],f=a[c];if(!(d===f||q(d)&&q(f)))return!1}return!0},copyFrom:function(a){null==
a&&(a=[]);a=Q(a)?a._src:a;F(a)||c(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=h.u.obj.argsToArray(arguments),b=0,c=a.length;b<c;b++)Q(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},Ma="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),
ja;for(ja in La)La.hasOwnProperty(ja)&&-1===a.inArray(ja,Ma)&&Ma.push(ja);var Da=["concat","slice","splice","filter","map"],Na=["reverse","sort"],ab="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");ja=0;for(var eb=Ma.length;ja<eb;ja++){var Wa=Ma[ja];Ea.prototype[Wa]=function(b){function c(){var f=d.apply(this._src,arguments);if(-1!==a.inArray(b,Na))f=this;else if(-1!==a.inArray(b,Da)){var e=ma();e.copyFrom(f);f=e}return f}var d=La[b]?La[b]:Array.prototype[b];return-1===a.inArray(b,
ab)?c:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(Wa)}h.u.obj.expose("h5.core.data",{createManager:function(a,b){ga(a)||c(ba);var d=new la(a);if(null!=b){""===b&&(b="window");var f={};f[a]=d;h.u.obj.expose(b,f)}return d},createObservableArray:ma,createObservableItem:function(a){e(a,!1,null,!0);var c=p(a);s(a,c,!0);var d=
new P,c=S(a,c);G(d,a,c);d.schema=a;for(var f in c)d[f]=c[f];f=c._createInitialValueObj();b(a,c._validateItemValue,f);m(d,f,null,!0);a=0;for(c=d._aryProps.length;a<c;a++)I(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:Q,isObservableItem:function(a){return!(!a||!a.constructor||!a._validateItemValue||L(a.getModel))},createSequence:function(b,c,d){function f(){return j}function e(){var a=j;j+=h;return a}function g(){return j.toString()}function o(){var a=j;j+=h;return a.toString()}
function i(){}var j=null!=b?b:1,h=null!=c?c:1,b=1===d?{current:g,next:o,returnType:1}:{current:f,next:e,returnType:2};b.setCurrent=function(a){j=a};a.extend(i.prototype,b);return new i},SEQ_STRING:1,SEQ_INT:2})})();(function(){function l(a,b){return!a||a.nodeType!==aa?void 0:a.getAttribute(b)}function y(a){if(!a)return null;for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function q(a,b,c,d){var f=[],b=N(b);if(!0===d)return t(f,a,b,c),f;for(var a=a.childNodes,d=0,e=a.length;d<e;d++)t(f,a[d],
b,c);return f}function t(a,b,c,d){if(b.nodeType===aa){for(var f=0,e=c.length;f<e;f++){var g=b.getAttribute(c[f]);if(typeof d===ha){if(null!==g){a.push(b);break}}else if(null!==g&&g==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;f=0;for(e=b.length;f<e;f++)t(a,b[f],c,d)}}}function w(b,c){for(var b=N(b),d=[],f=0,e=b.length;f<e;f++){var g=b[f];if(g.nodeType===aa&&!(!0===c&&(null!=l(g,n)||null!=l(g,H))))for(var j=q(g,m,void 0,!0),i=0,h=j.length;i<h;i++){for(var p=!0,s=j[i];null!=s&&s!==
g;s=s.parentNode)if(null!=l(s,n)||null!=l(s,H)){p=!1;break}p&&d.push(j[i])}}return a(d)}function g(b,c,d){for(var f=[],e=0,g=b.length;e<g;e++){var j=b[e];if(j.nodeType===aa){if(!0===d){if(null!=j.getAttribute(c)){f.push(j);continue}if(null!=l(j,n)||null!=l(j,H))continue}for(var i=q(j,c,void 0,!1),h=0,m=i.length;h<m;h++){var p=a(i[h])[0],s=p.parentNode;(null==l(s,n)&&null==l(s,H)||s===j)&&f.push(p)}}}return a(f)}function e(a){return a&&a.addEventListener&&a.getModel&&!F(a)&&!h.core.data.isObservableArray(a)||
h.core.data.isObservableItem(a)?!0:!1}function s(a,b){for(var c=0,d=a.length;c<d;c++){var f=a[c];f.nodeType===aa&&f.setAttribute(i,b)}}function p(b,d,f){var e=Q++,g=d[0];a(g).empty();if(f){!F(f)&&!h.core.data.isObservableArray(f)&&c(W);s(d,e);b._addBindingEntry(f,g,e);h.core.data.isObservableArray(f)&&!b._isWatching(f)&&(d=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(f)]=d,f.addEventListener("change",d));var d=l(g,C),d=y(b._getSrcCtxNode(d).childNodes),i=[];b._loopElementsMap[e]=
i;for(var e=g.ownerDocument.createDocumentFragment(),m=f.get?function(a){return f.get(a)}:function(a){return f[a]},n=0,p=f.length;n<p;n++){for(var q=[],u=0,H=d.length;u<H;u++){var t=R(d[u]);q.push(t);e.appendChild(t)}i[n]=q;g.appendChild(e);j(b,q,m(n),!1,!0)}}}function j(a,b,f,g,j){b=N(b);if(g)p(a,b,f);else{g=Q++;f&&(("object"!==typeof f||F(f)||h.core.data.isObservableArray(f))&&c(W),s(b,g),a._addBindingEntry(f,b,g));var i=e(f);i&&!a._isWatching(f)&&(g=function(b){a._observableItem_changeListener(b)},
a._listeners[a._getContextIndex(f)]=g,f.addEventListener("change",g));w(b,j).each(function(){u(this,f,i)});d(a,b,f,!1,j);d(a,b,f,!0,j)}}function d(a,b,c,d,f){var i=d?"data-h5-loop-context":"data-h5-context";g(b,i,f).each(function(){var b=l(this,i),f=null;c&&(f=e(c)?c.get(b):c[b]);j(a,this,f,d)})}function u(b,d,f){for(var e=l(b,m).split(la),g=[],j=[],i=[],h=0,n=e.length;h<n;h++){var p=e[h];if(-1===p.indexOf(I))0<a.trim(p).length&&(g.push(null),j.push(null),i.push(a.trim(p)));else{var s=p.split(I),
p=a.trim(s[0]),s=a.trim(s[1]),q=null,u=L.exec(p);u&&(q=u[1],p=/(\S+)[\s\(]/.exec(p)[1]);0<p.length&&0<s.length&&(g.push(p),j.push(q),i.push(s))}}e=b.tagName.toLowerCase();h=a(b);n=0;for(p=g.length;n<p;n++){var q=g[n],u=j[n],o=i[n],s=null;d&&(s=f?d.get(o):d[o]);null==q&&("input"===e?(q="attr",u="value"):q="text");switch(q){case "text":null==s?h.text(""):h.text(s);break;case "html":null==s?h.html(""):h.html(s);break;case "class":var q=l(b,S),o=(u=null==q)?"":" ",K=!1;s&&(K=!RegExp("\\s"+s+"\\s").test(" "+
q+" "));h[0].className=(u?"":q)+(K?o+s:"");break;case "attr":u||c(O);"input"===e&&"value"===u?null==s?h.val(""):h.val(s):null==s?h.removeAttr(u):h.attr(u,s);break;case "style":u||c(O);null==s?h.css(u,""):h.css(u,s);break;default:c(P)}}}function x(a,b,c){for(var d=0,f=c.length;d<f;d++){var e=c[d];b.removeChild(e);a._removeBinding(e)}}function z(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(R(a[c]));return b}function A(a,b,c,d,f){for(var e=c.ownerDocument.createDocumentFragment(),g=[],
i=0,h=f.length;i<h;i++){var m=z(c);g[i]=m;for(var n=0,l=m.length;n<l;n++)e.appendChild(m[n]);j(a,m,f[i])}Array.prototype[d].apply(b,g);return e}function f(a,b,c,d,f,e){var g=d.length;if(0!==g){for(var i=d[0],h=i,c=1===g?c.length:h+d[1];h<c;h++){var m=f[h];m&&x(a,b,m)}f.splice(i,d[1]);if(!(2>=g)){h=f.length;h=0===h||0===i?b.firstChild:i>=h?null:f[i][0];c=e.ownerDocument.createDocumentFragment();i=[i,0];for(m=2;m<g;m++){for(var n=z(e),l=0,p=n.length;l<p;l++)c.appendChild(n[l]);j(a,n,d[m]);i.push(n)}b.insertBefore(c,
h);Array.prototype.splice.apply(f,i)}}}function b(a,b){void 0!==a.nodeType?a.nodeType===aa&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=y(a));this._bindRootId=X++;Y[this._bindRootId]=this;for(var c=[],d=0,f=this._targets.length;d<f;d++){var e=this._targets[d];if(e.nodeType===aa){e.setAttribute(ea,this._bindRootId);for(var g=q(e,[n,H],void 0,!0),i=0,h=g.length;i<h;i++){var p=ma++;g[i].setAttribute(C,p)}g=q(e,m,void 0,!0);i=0;for(h=g.length;i<h;i++)p=g[i],
/class\s*:/.test(l(p,m))&&""!=p.className&&p.setAttribute(S,p.className)}c.push(e.cloneNode(!0))}this._srces=c;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};j(this,this._targets,this._rootContext,!1,!0)}var m="data-h5-bind",n="data-h5-context",H="data-h5-loop-context",C="data-h5-dyn-ctx",i="data-h5-dyn-vid",ea="data-h5-dyn-bind-root",S="data-h5-dyn-cn",I=":",la=";",L=/\(\s*(\S+)\s*\)/,O=7100,P=7101,W=7102,ma=0,Q=0,X=0,Y={},ba={},R;(function(){var b=
document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=void 0;d?(c.h5Dummy=void 0,R=function(b){var c=b.ownerDocument;return b.nodeType===aa?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):R=function(a){return a.cloneNode(!0)}})();a.extend(b.prototype,{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===aa){this._removeBinding(c);c.removeAttribute(ea);for(var d=q(c,S,void 0,!0),f=0,e=d.length;f<e;f++)d[f].removeAttribute(S);
c=q(c,C,void 0,!0);f=0;for(d=c.length;f<d;f++)c[f].removeAttribute(C)}}delete Y[this._bindRootId]},_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],e=this._getSrcCtxNode(l(d,C)),g=this._loopElementsMap[c];switch(a.method){case "set":f(this,d,a.target,[a.args[0],1,a.args[1]],g,e);break;case "shift":case "pop":var i=g[a.method]();i&&x(this,d,i);break;case "unshift":i=A(this,g,e,a.method,a.args);d.insertBefore(i,
d.firstChild);break;case "push":i=A(this,g,e,a.method,a.args);d.appendChild(i);break;case "splice":f(this,d,a.target,a.args,g,e);break;case "reverse":for(var i=d,h=g;i.firstChild;)i.removeChild(i.firstChild);for(var m=0,d=h.length;m<d;m++)for(var e=h[m],n=e.length-1;0<=n;n--)i.insertBefore(e[n],i.firstChild);g.reverse();break;case "sort":case "copyFrom":case null:for(var i=this._loopElementsMap,h=c,m=a.target,n=g,g=e,e=0,p=n.length;e<p;e++)x(this,d,n[e]);for(var n=d.ownerDocument.createDocumentFragment(),
p=[],e=0,s=m.length;e<s;e++){var q=z(g);p[e]=q;for(var o=0,K=q.length;o<K;o++)n.appendChild(q[o]);j(this,q,m.get(e))}d.appendChild(n);i[h]=p}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var c=!1;a.target===this._rootContext&&(c=!0);var d=this,f;for(f in b)if(b.hasOwnProperty(f)){var e=b[f];w(e,c).each(function(){u(this,a.target,!0)});g(e,n).each(function(){var b=l(this,n);if(!(b in a.props))return!0;d._removeBinding(this);var c=l(this,C),c=d._getSrcCtxNode(c),
c=R(c);this.parentNode.replaceChild(c,this);j(d,c,a.props[b].newValue)});g(e,H).each(function(){var b=l(this,H);if(!(b in a.props)||a.target._isArrayProp(b))return!0;d._removeBinding(this);j(d,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,c=this._srces.length;b<c;b++){var d=this._srces[b];if(l(d,C)===a)return d;d=q(d,C,a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,
this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);ba[c]=a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1},_removeBindingEntry:function(a){var b=ba[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var d=this._srcToViewMap[c];d&&d[a]&&(delete d[a],this._hasBindingForSrc(d)||(d=!1,e(b)?
(b.removeEventListener("change",this._listeners[c]),d=!0):h.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),d=!0),d&&delete this._listeners[c],delete this._srcToViewMap[c],this._usingContexts[c]=null))}ba[a]&&delete ba[a]}},_removeBinding:function(a){if(a.nodeType===aa){var b=l(a,i);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(i));for(var a=q(a,i),b=0,c=a.length;b<c;b++){var d=a[b];this._removeBindingEntry(l(d,i));d.removeAttribute(i)}}},_getViewsFromSrc:function(a){a=
this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});lb={createBinding:function(a,d){return new b(a,d)}}})();(function(){function l(c){return h.u.obj.isJQueryObject(c)?c:a(c)}function y(){this.__cachedTemplates={}}var q=h.async.deferred,t={escapeHtml:function(a){return h.u.str.escapeHtml(a)}};a.extend(function(){this._templateMap={}}.prototype,{applyToView:function(a){var c=this._templateMap,h;for(h in c)a.register(h,c[h])},register:function(a,c){this._templateMap[a]=c},marge:function(c){a.extend(this._templateMap,
c._templateMap)},registByElement:function(g){g=a(g);if(0!==g.length){var e=this;g.each(function(){var g=a.trim(this.id),h=a.trim(this.innerHTML);g||c(7002,null,{});e.register(g,h)})}}});a.extend(y.prototype,{load:function(g){var e=q(),l=null;switch(a.type(g)){case "string":a.trim(g)||c(7004);l=[g];break;case "array":l=g;0===l.length&&c(7004);for(var g=0,p=l.length;g<p;g++)x(l[g])?a.trim(l[g])||c(7004):c(7004);break;default:c(7004)}for(var p=[],g=0,j=l.length;g<j;g++)p.push(h.res.require(l[g]).resolve());
var d=this;$(p,function(a){for(var a=F(a)?a:[a],c=[],g,j=0,f=a.length;j<f;j++){for(var b=a[j].templates,h=0,n=b.length;h<n;h++){if(!d.isValid(b[h].content)){g=b[h];break}c.push(b[h])}if(g)break}if(g)try{d.register(g.id,g.content)}catch(l){return l.detail.url=a[j].url,l.detail.path=a[j].path,e.reject(l)}j=0;for(f=c.length;j<f;j++)d.register(c[j].id,c[j].content);e.resolve()},function(a){e.reject(a)});return e.promise()},getAvailableTemplates:function(){var a=[],c;for(c in this.__cachedTemplates)a.push(c);
return a},register:function(g,e){"string"!==a.type(e)?c(7E3,null,{id:g}):(!x(g)||!a.trim(g))&&c(7002,[]);try{var h=new EJS.Compiler(e,"[");h.compile();this.__cachedTemplates[g]=h.process}catch(l){h=l.lineNumber,c(7010,[h?" line:"+h:"",l.message],{id:g})}},isValid:function(a){try{return(new EJS.Compiler(a,"[")).compile(),!0}catch(c){return!1}},get:function(g,e){var h=this.__cachedTemplates;(!x(g)||!a.trim(g))&&c(7002);(h=h[g])||c(7005,g);var l=e?a.extend(!0,{},e):{},j=l.hasOwnProperty("_h")?new EJS.Helpers(l):
new EJS.Helpers(l,{_h:t}),d=null;try{d=h.call(l,l,j)}catch(q){c(7006,q.toString(),q)}return d},update:function(a,c,h){return l(a).html(this.get(c,h))},append:function(a,c,h){return l(a).append(this.get(c,h))},prepend:function(a,c,h){return l(a).prepend(this.get(c,h))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(g){if(typeof g===ha)this.__cachedTemplates={};else{var e=null;switch(a.type(g)){case "string":e=[g];break;case "array":g.length||c(7002);e=g;break;default:c(7002)}for(var g=
0,h=e.length;g<h;g++){var l=e[g];(!x(l)||!a.trim(l))&&c(7002)}g=0;for(h=e.length;g<h;g++)delete this.__cachedTemplates[e[g]]}},bind:function(g,e){var l=null;null==g&&c(7007);F(g)?l=g:(l=a(g),0===l.length&&c(7007),l=l.toArray());(null==e||"object"!==typeof e||F(e)||h.core.data.isObservableArray(e))&&c(7009);return lb.createBinding(l,e)}});var w=new y;w.createView=function(){return new y};a(function(){a('script[type="text/ejs"]').each(function(){var c=a.trim(this.id),e=a.trim(this.innerHTML);0!==e.length&&
c&&(e=new EJS.Compiler(e,"["),e.compile(),w.__cachedTemplates[c]=e.process)})});h.u.obj.expose("h5.core",{view:w})})();(function(){function c(b){var d={},f;for(f in ba){var e=a("<div></div>").addClass(b).addClass(f).appendTo("body"),g=a.camelCase(f);d[g]={};a.map(ba[f],function(a){d[g][a]="width"===a||"height"===a?parseInt(e.css(a).replace(/\D/g,""),10):e.css(a)});e.remove()}return d}function y(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function q(a,b){for(var c=[],
d=a/2,f=0.8*a/2,e=360/b*Math.PI/180,g=1;g<=b;g++){var i=e*g,h=Math.cos(i),i=Math.sin(i);c.push({from:{x:d+f/2*h,y:d+f/2*i},to:{x:d+f*h,y:d+f*i}})}return c}function t(a){return function(){var b=document.body,c=document.documentElement,d=B?b:D?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function w(a){return function(){var b=B?document.body:document.documentElement;
return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function g(a){var b=B?document.body:document.documentElement;return Q.isiOS?window["inner"+a]:b["client"+a]}function e(b){var c=a(b)[0],d=document.body,f=a("html")[0],b={top:0,left:0};if(c===d&&D)return{top:parseFloat(f.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(f.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||
0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());d=B?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+pa()-c,left:b.left+sa()-d}}function s(){a.each(aa(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function p(a){a=$(a)?a[0]:a;return a===window||a===document||a===document.body}
function j(a){return W(O(a)).getComputedStyle(a,null)}function d(b,c){return!W(O(b)).getComputedStyle?a(b).css(c):j(b)[c]}function u(b){if(!W(O(b)).getComputedStyle)return a(b).height();var c=j(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function G(b){if(!W(O(b)).getComputedStyle)return a(b).width();var c=j(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function z(b,c){if(!W(O(b)).getComputedStyle)return a(b).outerHeight();var d=j(b);
return u(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function A(b,c){if(!W(O(b)).getComputedStyle)return a(b).outerWidth();var d=j(b);return G(b)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)+parseFloat(d.borderLeftWidth)+parseFloat(d.borderRightWidth)+(c?parseFloat(d.marginLeft)+parseFloat(d.marginRight):0)}function f(b){if(!W(O(b)).getComputedStyle)return a(b).innerHeight();
var c=j(b);return u(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function b(b){if(!W(O(b)).getComputedStyle)return a(b).innerWidth();var c=j(b);return G(b)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)}function m(b,c,d,f){function e(){i+=g;i>d?(clearInterval(n),c.each(function(a){for(var c in b[a])this.style[c]=""}),f()):c.each(function(b){var c=h[b],d;for(d in c)c[d]+=m[b][d];a(this).css(c)})}var g=ma,i=0,h=[],m=[];c.each(function(a){var f=b[a];m[a]={};h[a]={};var e=j(c[a]),i;for(i in f)h[a][i]=
parseFloat(e[i]),m[a][i]=(parseFloat(f[i])-parseFloat(e[i]))*g/d});e();var n=setInterval(e,g)}function n(a,b,c){var f=[];a.each(function(){var a=parseFloat(d(this,"opacity"));f.push({opacity:a})});a.css({opacity:0,display:"block"});m(f,a,b,c)}function H(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});m(d,a,b,c)}function C(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(P)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(d);
d.id=P;d.setAttribute("type","text/css");d.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}d=this.style.throbber.width;this.group=y("group",c,{width:d+"px",height:this.style.throbber.height+"px"});this.group.className=N;for(var d=q(d,this.style.throbber.lines),f=this.style.throbberLine.color,e=this.style.throbberLine.width,g=0,i=d.length;g<i;g++){var h=d[g],j=h.from,m=h.to,h=y("line",c);h.strokeweight=e;h.strokecolor=f;h.fillcolor=f;h.from=j.x+","+j.y;h.to=m.x+
","+m.y;j=y("stroke",c);j.opacity=1;h.appendChild(j);this.group.appendChild(h)}this._createPercentArea(c)}function i(b,d){var f=this,e=a(b);if(e.length){var g=p(e),e=g?a("body"):e,i=O(e[0]);if(i!==window.document&&(e[0]===i||W(i)===e[0]))e=a(i.body);var j=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a"},d);this._displayed=!1;this._throbbers=[];this._settings=j;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},c(j.theme));
this._isScreenLock=g;this._$target=e;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=null;this._scrollHandler=function(){f._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){f._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof j.fadeIn?j.fadeIn:-1;this._fadeOutTime="number"===typeof j.fadeOut?j.fadeOut:-1;this._$content=a();this._$overlay=a();
this._$skin=a();for(var e=h.u.str.format(Y,""===j.message?'style="display: none;"':"",j.message),g="https"===document.location.protocol?"return:false":"about:blank",m=0,n=this._$target.length;m<n;m++)this._$content=this._$content.add(a(i.createElement("div")).append(e).addClass(ea).addClass(j.theme).addClass(S).css("display","none")),this._$overlay=this._$overlay.add((j.block?a(i.createElement("div")):a()).addClass(ea).addClass(j.theme).addClass(I).css("display","none")),this._$skin=this._$skin.add((D||
B?a(i.createElement("iframe")):a()).attr("src",g).addClass(ea).addClass(la).css("display","none"));var q=this._isScreenLock&&T?"fixed":"absolute";a.each([this._$overlay,this._$content],function(){this.css("position",q)});i=j.promises;j=function(){f.hide()};e=a.hasOwnProperty("curCSS")?"pipe":"then";F(i)?(i=a.map(i,function(a){return a&&L(a.promise)?a:null}),0<i.length&&ua(h.async.when(i),e,[j,j])):i&&L(i.promise)&&ua(i,e,[j,j])}}var ea="h5-indicator",S="content",I="overlay",la="skin",N="vml-root",
P="h5-vmlstyle",Y='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',X=500,ma=13,Q=h.env.ua,$=h.u.obj.isJQueryObject,aa=h.u.obj.argsToArray,ba={throbber:["width","height"],"throbber-line":["width","color"]},R=!!document.createElement("canvas").getContext,r=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),
B="CSS1Compat"!==document.compatMode,D=Q.isIE&&6>=Q.browserVersion,v=Q.isChrome&&Q.isDesktop,T=!(Q.isAndroidDefaultBrowser||Q.isiOS&&5>Q.browserVersion||D||B||Q.isWindowsPhone),ca=null,ga=null,oa=null,ia=null,pa=null,sa=null,za=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(f){f=a.camelCase(f);if(f in b.style)return!0;for(var f=f.charAt(0).toUpperCase()+f.slice(1),e=0;e<d;e++)if(c[e]+f in
b.style)return!0;return!1}}(),ga=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+a]:B?b["client"+a]:c["client"+a]}}("Height"),oa=t("Height"),ia=t("Width"),pa=w("Top"),sa=w("Left"),ca=za("animationName");C.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=
null)},_run:function(){for(var a=this.style.throbber.lines,b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,f=0,e=d.length;f<e;f++){var g=d[f];if("textbox"!==g.nodeName){var i=f+1;g.firstChild.opacity=i==c?"1":i==c+1||i==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var h=this;this._runId=setTimeout(function(){h._run.call(h)},Math.floor(b/a))},_createPercentArea:function(b){var c=y("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var d=b.find("td");
d.width(this.group.style.width);d.height(this.group.style.height);d.css("line-height",this.group.style.height);d.addClass("throbber-percent");c.appendChild(b[0]);this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var ka=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,f=this.baseDiv,e=this.percentDiv;d.width=this.style.throbber.width;
d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.appendChild(d);e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+"px";e.style.lineHeight=this.style.throbber.height+"px";e.className="throbber-percent";f.appendChild(e);this.positions=q(d.width,this.style.throbber.lines)};ka.prototype={show:function(a){a&&(this.root=a,this.highlightPos=
1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(v?clearInterval(this._runId):clearTimeout(this._runId),this._runId=null)},_run:function(){var a=this.canvas,b=a.getContext("2d"),c=this.highlightPos,d=this.positions,f=this.style.throbberLine.color,e=this.style.throbberLine.width,g=this.style.throbber.lines,i=this.style.throbber.roundTime;a.width=a.width;for(var h=0,j=d.length;h<j;h++){b.beginPath();b.strokeStyle=f;b.lineWidth=e;
var m=h+1;b.globalAlpha=m==c?1:m==c+1||m==c-1?0.75:0.4;var n=d[h],m=n.from,n=n.to;b.moveTo(m.x,m.y);b.lineTo(n.x,n.y);b.stroke()}c==g?c=0:c++;this.highlightPos=c;if(v){var l=0;this._runId=setInterval(function(){l++;a.style.webkitTransform="rotate("+l+"deg)";360<=l&&(l-=360)},i/360)}else if(ca)a.className="throbber-canvas";else{var p=this;this._runId=setTimeout(function(){p._run.call(p)},Math.floor(i/g))}},setPercent:function(a){this.percentDiv.innerHTML=a}};i.prototype={show:function(){if(this._displayed||
!this._$target||0<this._$target.children("."+ea).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,f=function(){var c=a(window);b._isScreenLock&&(s(b._$overlay,b._$content),T||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},e=0,g=this._$target.length;e<g;e++){var i=this._$target.eq(e),h=this._$content.eq(e),j=this._$skin.eq(e),m=this._$overlay.eq(e),l=d(i[0],"position");
!this._isScreenLock&&"static"===l&&(i.data("before-position",l),i.data("before-zoom",d(i[0],"zoom")),i.css({position:"relative",zoom:"1"}));l=O(i[0]);if(l=R?new ka(this._styles,l):r?new C(this._styles,l):null)b._throbbers.push(l),b.percent(this._settings.percent),l.show(h.children(".indicator-throbber")[0]);i.append(j).append(m).append(h)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=a(e);0>c?(e.css("display",
"block"),f()):n(e,c,f);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!this._isScreenLock||!T)for(var c=0,d=this._$target.length;c<d;c++){b=this._$target.eq(c);var f=this._$overlay.eq(c),e=this._$skin.eq(c);if(this._isScreenLock)a=ia(),b=oa();else{var g=b[0];a=g.scrollWidth;b=g.scrollHeight;if(D)a=Math.max(a,g.clientWidth),b=Math.max(b,g.clientHeight);else if(Q.isIE&&"function"===typeof getComputedStyle){var g=W(O(g)).getComputedStyle(g,null),i=parseFloat(g.width)+
parseFloat(g.paddingLeft)+parseFloat(g.paddingRight);a+=i-parseInt(i)-1;g=parseFloat(g.height)+parseFloat(g.paddingTop)+parseFloat(g.paddingBottom);b+=g-parseInt(g)-1}}f[0].style.width=a+"px";f[0].style.height=b+"px";if(D||B)e[0].style.width=a+"px",e[0].style.height=b+"px"}},_reposition:function(){for(var c=0,e=this._$target.length;c<e;c++){var g=this._$target.eq(c),i=this._$content.eq(c);if(this._isScreenLock){var h=ga();T?i.css("top",(h-z(i[0]))/2+"px"):i.css("top",pa()+h/2-z(i[0])/2+"px")}else i.css("top",
g.scrollTop()+(f(g[0])-z(i[0]))/2);var h=b(i[0])-G(i[0]),j=0;i.children().each(function(){var b=a(this);if("none"===d(b[0],"display"))return!0;j+=A(this,!0)});i.css("width",j+h);i.css("left",g.scrollLeft()+(b(g[0])-A(i[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());var f=a(d),d=function(){var c=a(window);
f.remove();b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)};if(!ca||v)for(var e=0,g=
this._throbbers.length;e<g;e++)this._throbbers[e].hide();0>c?(f.css("display","none"),d()):H(f,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!x(a))return this;if(!this._redrawable)return this._lastMessage=a,this;this._$content.children(".indicator-message").css("display","inline-block").text(a);
this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);
this._redrawable=!1;T||D||B?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};h.u.obj.expose("h5.ui",{indicator:function(b,c){return a.isPlainObject(b)?new i(b.target,b):new i(b,c)},isInView:function(b,c){var d,f,i,h,j=a(b);if(typeof c===ha)f=g("Height"),h=g("Width"),d=pa(),i=sa();else{h=a(c);if(0===h.find(j).length)return;i=e(h);d=i.top+parseInt(h.css("border-top-width"));i=i.left+parseInt(h.css("border-left-width"));f=h.innerHeight();h=h.innerWidth()}f=d+f;h=i+h;var m=e(j),n=m.top,
m=m.left,l=n+j.outerHeight(),j=m+j.outerWidth();return(d<=n&&n<f||d<l&&l<=f)&&(i<=m&&m<h||i<j&&j<=h)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,X))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,X)}})})();(function(){function l(){var c=a.mobile.activePage,c=c&&c[0]&&c[0].id;return x(c)&&0<c.length?c:null}function y(){var c=l();null!==c&&a(function(){g.addCSS(c);g.bindController(c)})}function q(a,b){for(var c in s)for(var d=
s[c],e=a===c,g=0,i=d.length;g<i;g++){var h=d[g];if(e)h[(b?"enable":"disable")+"Listeners"]()}for(c in p){d=p[c];e=a===c;g=0;for(i=d.length;g<i;g++)if(h=d[g],e)h[(b?"enable":"disable")+"Listeners"]()}}function t(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");if(a===b)return 0;for(var c=a.split("."),d=b.split("."),e=c.length,g=0;g<e;g++){if(null==d[g])return 1;var i=parseInt(c[g],10),h=parseInt(d[g],10);if(i!==h)return i<h?-1:1}return null!=d[e]?-1:0}var w,g=null,e={},s={},p={},j={},d={},
u=!1,G=!1,z=!1;h.u.obj.ns("h5.ui.jqm");h.ui.jqm.dataPrefix="h5";var A={__name:"JQMController",__ready:function(){var c=this,b=l();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)});var d=this.$find("#"+b);d.one("h5controllerready.emulatepageshow",function(){z&&d[0]===a.mobile.activePage[0]&&d.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){w||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){w&&
this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});G=!0;var c=c.event.target.id,b=s[c],d=p[c];if(b){for(var e=0,g=b.length;e<g;e++)b[e].dispose();s[c]=[]}if(d){e=0;for(g=d.length;e<g;e++)d[e].dispose();p[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);q(a,!0)},"{rootElement} pagehide":function(c){G||
a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});G=!1;c=c.event.target.id;q(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(c){var b=!1,d=a(c.event.target),e=c.evArg?c.evArg.prevPage:a("");if(c=s[d[0].id])for(var g=0,h=c.length;g<h;g++)if(!c[g].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:e})});b=!0;break}b||d.trigger("h5jqmpageshow",{prevPage:e})},
"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var b=l();null===b||-1!==a.inArray(c,s[b])||(p[b]||(p[b]=[]),p[b].push(c))}},"{rootElement} h5controllerunbound":function(c){var b=c.evArg,c=l();null!==c&&(b=a.inArray(b,p[c]),-1!==b&&p[c].splice(b,1))},loadScript:function(c){var c=a("#"+c),b=a.trim(c.data(this.getDataAttribute("script")));if(0!==b.length)return b=a.map(b.split(","),function(b){return a.trim(b)}),c=!0==c.data(this.getDataAttribute("async")),h.u.loadScript(b,{async:c})},
getDataAttribute:function(a){var b=h.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=e[a],c=j[a];if(b&&0!==b.length){s[a]||(s[a]=[]);for(var d=s[a],g=0,l=b.length;g<l;g++){for(var i=b[g],p=!1,q=0,u=d.length;q<u;q++){var t=d[q];if(t&&t.__name===i.__name){p=!0;break}}p||s[a].push(h.core.controller("#"+a,i,c[g]))}}},addCSS:function(c){if(c=d[c])for(var b=document.getElementsByTagName("head")[0],e=b.getElementsByTagName("link"),g=e.length,h=0,j=c.length;h<
j;h++){for(var i=a.mobile.path.parseUrl(c[h]).filename,l=!1,p=0;p<g;p++)if(a.mobile.path.parseUrl(e[p].href).filename===i){l=!0;break}l||(i=document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=c[h],b.appendChild(i))}},removeCSS:function(c){var b=d[c];if(b&&(c=l(),null!==c)){var e=d[c];a("link").filter(function(){var c=a(this).attr("href");return-1!==a.inArray(c,b)&&-1===a.inArray(c,e)}).remove()}}};h.u.obj.expose("h5.ui.jqm.manager",{init:function(){u||(u=!0,w=0<=t(a.mobile.version,
"1.4"),a(document).one("pageshow",function(){z=!0}),a(function(){g=kb.controllerInternal("body",A,null,{managed:!1});y()}))},define:function(f,b,g,h){x(f)||c(12E3,"id");null!=b&&!x(b)&&!F(b)&&c(12E3,"cssSrc");null!=g&&((x(g)||F(g))&&c(12001),(!a.isPlainObject(g)||!("__name"in g))&&c(12E3,"controllerDefObject"),null!=h&&!a.isPlainObject(h)&&c(12E3,"initParam"));d[f]||(d[f]=[]);e[f]||(e[f]=[]);j[f]||(j[f]=[]);a.merge(d[f],a.map(a.makeArray(b),function(b){return a.inArray(b,d[f])!==-1?null:b}));g&&-1===
a.inArray(g,e[f])&&(e[f].push(g),j[f].push(h));u&&null!==l()?y():this.init()}})})();(function(){function l(){t||(t=navigator.geolocation);return t}function y(a,c){this.oblateness=a;this.semiMajorAxis=c}function q(){}var t=null,w=h.env.ua;y.prototype.getOblateness=function(){return this.oblateness};y.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var g=new y(298.257222,6378137),e=new y(299.152813,6377397.155),s=Math.PI/180;a.extend(q.prototype,{isSupported:w.isIE&&9<=w.browserVersion?
!0:!!l(),getCurrentPosition:function(a){var c=h.async.deferred();l().getCurrentPosition(function(a){c.resolve(a)},function(a){c.reject(X(2002,null,a))},a);return c.promise()},watchPosition:function(a){function c(){}var d=h.async.deferred(),e=l().watchPosition(function(a){d.notify(a)},function(a){l().clearWatch(e);d.reject(X(2002,null,a))},a);c.prototype.unwatch=function(){l().clearWatch(e);d.resolve()};return d.promise(new c)},getDistance:function(a,e,d,h,l){(!isFinite(a)||!isFinite(e)||!isFinite(d)||
!isFinite(h))&&c(2E3);var q=l?l:g;q instanceof y||c(2001);var l=q.getSemiMajorAxis(),t=q.getOblateness(),a=a*s,e=e*s,d=d*s,q=h*s,h=(a+d)/2,t=Math.sqrt(2*t-1)/t,t=Math.pow(t,2),f=Math.sqrt(1-t*Math.pow(Math.sin(h),2)),t=l*(1-t)/Math.pow(f,3),l=l/f,e=e-q;return Math.sqrt(Math.pow(t*(a-d),2)+Math.pow(l*Math.cos(h)*e,2))},GS_GRS80:g,GS_BESSEL:e});h.u.obj.expose("h5.api",{geo:new q})})();(function(){function l(a){if(a){var d=a.deferred;(Ba(d)||Ca(d)||!a.result)&&c(u)}}function y(b,d,e){if(a.isPlainObject(b))for(var f in b){var g=
a.trim(f).replace(/ +/g," ").split(" "),i=[];""===g[0]?c(z):1===g.length?(i.push(g[0]),i.push("="),i.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(g[1])?3===g.length&&/^like$/i.test(g[1])?(i.push(g[0]),i.push(g[1]),i.push("?"),i.push("ESCAPE"),i.push('"'+g[2]+'"')):(i.push(g[0]),i.push(g[1]),i.push("?")):c(G);d.push(i.join(" "));e.push(b[f])}}function q(){}function t(){this._multiple=!1}function w(a){this._db=a;this._df=A();this._tx=null;this._tasks=[];this._queue=[]}function g(a,c,d){this._statements=
[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=F(d)?d.join(", "):"*";this._orderBy=this._where=null}function e(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d?N(d):[];this._df=A();this._multiple=!0}function s(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d;this._where=null}function p(a,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._where=null}
function j(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(c);this._parameters.push(d||[])}function d(a){this._db=a}var u=3E3,G=3003,z=3011,A=h.async.deferred,f=h.u.str.format;a.extend(t.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(w.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=
a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof t||c(3009);var d=this._getRecentTask();(!d||d.result)&&this._queue.push(a);return this},_execute:function(a){function c(){if(0===f.length){var h=a(g);d._setResult.apply(d,[h]);e.notify(h,d)}else{for(var j=f.shift(),l=j._statements,p=j._parameters,q=A().resolve().promise(),h=[],s=0,t=l.length;s<t;s++)(function(a,b){q=Y(q,function(){var c=A();d._tx.executeSql(a,b,function(a,b){h.push(j._onComplete(b));
c.resolve()});return c.promise()})})(l[s],p[s]);Y(q,function(){g.push(j._multiple?h:h[0]);c()})}}var d=this,e=this._df,f=this._queue,g=[];try{l(this._getRecentTask());this._addTask(e);for(var h=0,j=f.length;h<j;h++)f[h]._buildStatementAndParameters();this._runTransaction()?c():this._db.transaction(function(a){d._tx=a;c()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(X(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,
b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(p){e.reject(p)}this._df=A();return e.promise()},execute:function(){return this._execute(function(a){return a})},promise:function(){return this._df.promise()}});g.prototype=new t;a.extend(g.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&c(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!x(b)&&c(3004,["Select","orderBy"]);this._orderBy=N(b);return this},_buildStatementAndParameters:function(){var b=
"",c=this._where,b=f("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(c)){var d=[];y(c,d,this._parameters);b+=" WHERE "+d.join(" AND ")}else x(c)&&(b+=" WHERE "+c);F(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});e.prototype=new t;a.extend(e.prototype,{_buildStatementAndParameters:function(){var b=this._values,c=this._statements,d=this._parameters;if(0===b.length)c.push(f("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),d.push([]);else for(var e=0,g=b.length;e<g;e++){var i=b[e];if(null==i)c.push(f("INSERT INTO {0} DEFAULT VALUES",this._tableName)),d.push([]);else if(a.isPlainObject(i)){var h=[],j=[],l=[],p;for(p in i)h.push("?"),j.push(p),l.push(i[p]);c.push(f("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,j.join(", "),h.join(", ")));d.push(l)}}},_onComplete:function(a){return a.insertId}});s.prototype=new t;a.extend(s.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&c(3004,["Update",
"where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=this._values,d=[],e;for(e in b)d.push(e+" = ?"),this._parameters.push(b[e]);b=f("UPDATE {0} SET {1}",this._tableName,d.join(", "));a.isPlainObject(c)?(e=[],y(c,e,this._parameters),b+=" WHERE "+e.join(" AND ")):x(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});p.prototype=new t;a.extend(p.prototype,{where:function(b){!a.isPlainObject(b)&&
!x(b)&&c(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",c=this._where,b=f("DELETE FROM {0}",this._tableName);if(a.isPlainObject(c)){var d=[];y(c,d,this._parameters);b+=" WHERE "+d.join(" AND ")}else x(c)&&(b+=" WHERE "+c);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});j.prototype=new t;a.extend(j.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});
a.extend(d.prototype,{select:function(a,d,e){x(a)||c(3001,"select");!F(d)&&"*"!==d&&c(3005,"select");return new g(this.transaction(e),a,d)},insert:function(b,d,f){x(b)||c(3001,"insert");null!=d&&!F(d)&&!a.isPlainObject(d)&&c(3006,"insert");return new e(this.transaction(f),b,d)},update:function(b,d,e){x(b)||c(3001,"update");a.isPlainObject(d)||c(3006,"update");return new s(this.transaction(e),b,d)},del:function(a,d){x(a)||c(3001,"del");return new p(this.transaction(d),a)},sql:function(a,d,e){x(a)||
c(3007,"sql");null!=d&&!F(d)&&c(3008,"sql");return new j(this.transaction(e),a,d)},transaction:function(a){void 0!=a&&!(a instanceof w)&&c(3002,"transaction");return a?a:new w(this._db)}});a.extend(q.prototype,{isSupported:!!window.openDatabase,open:function(a,c,e,f){if(this.isSupported)return a=openDatabase(a,c,e,f),new d(a)}});h.u.obj.expose("h5.api",{sqldb:new q})})();(function(){function c(a){this._storage=a}a.extend(c.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},
getItem:function(a){a=this._storage.getItem(a);return null===a?null:h.u.obj.deserialize(a)},setItem:function(a,c){this._storage.setItem(a,h.u.obj.serialize(c))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var c=this._storage,h=0,l=c.length;h<l;h++){var g=c.key(h);a(h,g,this.getItem(g))}}});h.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__",
"ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new c(window.localStorage),session:new c(window.sessionStorage)})})()})(jQuery);